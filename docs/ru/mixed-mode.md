# Смешанный режим отображения сущностей

Смешанный режим позволяет отображать, а так же редактировать сразу несколько сущностей в рамках одного интерфейса 
редактора. Например, показать в одном списке одновременно новости и категории новостей.

## Конфигурация

В конфигурационном файле должны быть описаны две сущности, которые будут «смешиваться». Правила «смешивания» 
прописываются в секции `mixedMode`:

```json
{
    "mixedMode": [
      {
          "entities" : ["categories", "news"],
          "fields": {
              "type": "type",
              "prependIcon": "title"
          }
      }
    ]
}
```

| Параметр | Тип | Описание | Обязательный параметр? | Значение по-умолчанию |
| --- | --- | --- | --- | --- |
| entities | array | Названия «смешиваемых» сущностей. | + | - |
| fields[type] | string | Название поля в ответе API, указывающее на название сущности, к которой относится запись. | + | - |
| fields[prependIcon] | bool | Параметр, указывающий к каком полу прикрепить иконку смешанного режима. | + | - |

Основной сущностью считается та, что указана первой в массиве конфигурации `entities`.

## API

При включенном смешанном режиме запросы к бекенду отправляются с GET-параметром `?mixed=<название-смешиваемой-сущности>`. 
В списке записей запросы отправляются на API основной сущности. При редактировании записи запрос к бекенду отправляется 
на URL, указанный в настройках редактируемой сущности.

### Пример

Таким образом, (на основе выше приведённого примера конфигурации редактора) при обращении к бекенду по 
URL `/rest/v1/news?mixed=categories`, в ответ клиент должен получить:

1. Смешанный список записей из двух сущностей (новости и категории).
2. Поле `type` с указанием на сущность: `news` или `categories`.

```json
{
    "items": [
        {
            "id": 255,
            "title": "День города в Моске",
            "type": "news"
        },
        {
            "id": 111,
            "title": "Праздники",
            "type": "categories"
        },
        {
            "id": 211,
            "title": "Спорт",
            "type": "categories"
        },
        {
            "id": 755,
            "title": "Hewlett-Packard показала рюкзак-аккумулятор для зарядки гаджетов",
            "type": "news"
        },
        {
            "id": 211,
            "title": "Транспорт",
            "type": "categories"
        }
    ],
    "_links": {
        "self": {
            "href": "/rest/v1/news?mixed=categories&page=1"
        },
        "next": {
            "href": "/rest/v1/news?mixed=categories&page=2"
        },
        "last": {
            "href": "/rest/v1/news?mixed=categories&page=8"
        }
    },
    "_meta": {
        "totalCount": 50,
        "pageCount": 10,
        "currentPage": 1,
        "perPage": 5
    }
}
```
