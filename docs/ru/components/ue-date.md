# ue-date

Компонент для выбора даты. Для редактирования компонента подключается виджет [Datepicker](https://github.com/g00fy-/angular-datepicker).

```javascript
{
    name: 'ue-date',
    settings: {
        label: 'Date label',
        hint: 'Это поле даты',
        multiple: true,
        multiname: 'new_value',
        depend: 'other_field_name',
        width: 6,
        templates: {
            preview: '<span> {{value}} </span>',
            edit: function(scope) {
                scope.clickHandler = function(e) { /* логика */ };
                return '<input type="text" data-ng-disabled="readonly" name="{{name}}" data-ng-click="clickHandler($event)" data-ng-model="value" class="form-control input-sm"/>'
            },
            filter: 'module/components/templates/filterTemplate.html'
        },
        defaultValue: '20.11.2016',
        validators: [
            {
                type: 'date',
                minDate: '10.11.2016',
                maxDate: '10.12.2016'
            }
        ]

    }
}
```

| Параметр | Тип | Описание | Обязательный параметр? | Значение по-умолчанию |
| --- | --- | --- | --- | --- |
| name | string | Название компонента. | + | - |
| settings | object | Объект настройки компонента | + | - |
| settings[label] | string | Название поля (выводится в интерфейсе редактора) | + | - |
| settings[hint] | string | Текстовая информационная подсказка, выводимая слева от заголовка поля. | - | - |
| settings[multiple] | bool | Параметр отвечает за указание возможности поля принимать множественные значения. | - | false |
| settings[readonly] | bool | Параметр отвечает за указание активности компонента с точки зрения взаимодействия с пользователем. | - | false |
| settings[template] | object | Объект для настройки шаблонов. | - | - |
| settings[templates][preview] | string или function | Строка с HTML-кодом шаблона, функция, возвращающая шаблон, или путь до шаблона в режиме просмотра (например отображение в таблице). | + | - |
| settings[templates][edit] | string или function  | Строка с HTML-кодом шаблона, функция, возвращающая шаблон, или путь до шаблона в режиме редактирования (например отображение на форме редактирования). | + | - |
| settings[templates][filter] | string или function  | Строка с HTML-кодом шаблона, функция, возвращающая шаблон, или путь до шаблона в режиме фильтра (например, отображение в фильтре). | + | - |
| settings[multiname] | string | Ключ, который будет использован для создания массива в запросе к бекенду в том случае, если поле работает в множественном режиме. Если ключ не установлен, то на бекенд отправится массив вида `['value1', 'value2', 'value3']`. Если ключ установлен, например: `multiname:"value"`, то на бекенд отправится массив вида `[["value"=>"value1"], ["value"=>"value2"], ["value"=>"value3"]]` | - | - |
| settings[width] | int | Ширина поля в единицах bootstrap-сетки, принимаемое значении от 1 до 6. | - | 6 |
| settings[defaultValue] | string | Значение поля по-умолчанию. | - | - |
| settings[validators] | array | Массив, содержащий настройки для валидации компонента. Более подробно описано ниже. | - | - |
| settings[depend] | string | Параметр отвечает за зависимость данного поля от поля с именем other_field_name. Поле с именем other_field_name должно быть описано в конфигурационном файле в рамках текущей сущности. Если поле other_field_name не заполнено, то текущее поле не активно. Если у компонентов, для которых требуется делать запрос для получения значений по API, в поле адреса запроса указаны `:dependField` и `:dependValue`(например, `/api/service/v1/json/categories?filter={:dependField::dependValue}`) , то они заменятся на имя поля указанного в depend и значение этого поля соответственно. | - | - |

## settings[validators]

Помимо серверной валидации возможна настройка клиентской со стороны редактора. Компоненты полей имеют параметр __validators__, который принимает массив настроек.
Объекты этого массива имеет структуру:

```javascript
{
   type: 'validatorGroup',
   /* остальные параметры */
}
```

## Поддерживаемые типы валидаторов компоненты ue-date

### date

Datepicker имеет пять уровней отображения при клике по элементу: year, month, date, hours, minutes. То есть, по умолчанию, сначала виден список годов, затем по клику происходит переход на месяцы и т. д. пока дата не сформируется полностью.

 Параметр | Тип | Описание | Обязательный параметр? | Значение по-умолчанию |
| --- | --- | --- | --- | --- |
| minDate | string | Строковое представление начальной доступной даты.  | - | - |
| maxDate | string | Строковое представление конечной доступной даты.  | - | - |
| format | string | Используемый формат даты. Так, как для работы ue-date используется библиотека moment.js, валидатор поддерживает форматы даты используемые в библиотеке. Они описаны в документации https://momentjs.com/docs/#/displaying/format/ . | - | `YYYY-MM-DD hh:mm:ss` |
| minView | string | Минимальный уровень отображения для выбора даты / времени в данном datepicker(т.е. если установлен, например, параметр date, то уровни ниже date(hours, minutes) не будут отображаться).  | - | date |
| maxView | string |  Максимальный уровень отображения для выбора даты / времени в данном datepicker(т.е. если установлен, например, параметр date, то уровни выше date(year, month) не будут отображаться).  | - | year |
| view | string | Уровень отображения по умолчанию для выбора даты / времени в данном datepicker(т.е. если установлен, например, параметр date, то при раскрытие datepicker будет отображаться уровень date от которого можно перейти на другие уровни(на сколько позволяют перейти minView и maxView)).  | - | date |

Datepicker поддерживает локализацию. Настройка локализации зависит от параметра `language[code]` в блоке `ui`, но так как Datepicker использует библиотеку moment.js нужно подключить соответствующий язык в проект(он находиться в самой библиотеке moment в каталоге `locale`).

