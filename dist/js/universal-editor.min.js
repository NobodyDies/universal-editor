function UniversalEditor(e,t){"use strict";var n=angular.module("universal.editor"),a=$("#"+e);a.append("<div data-ui-view=''></div>"),n.constant("configData",t),angular.bootstrap(a[0],["unEditor"])}!function(){"use strict";function e(e,t,n,a){return{request:function(e){return e.beforeSend&&e.beforeSend(e),t.$broadcast("editor:request_start",""),e.data&&"object"==typeof e.data&&angular.forEach(e.data,function(t,n){angular.isArray(t)&&0===t.length&&(e.data[n]=null)}),e},responseError:function(t){if(t.status!==-1)try{JSON.parse(JSON.stringify(t));null!==t.data&&t.data.hasOwnProperty("message")&&t.data.message.length>0?n.error(t.data.message):422===t.status||400===t.status?a("RESPONSE_ERROR.INVALID_DATA").then(function(e){n.warning(e)}):401===t.status?a("RESPONSE_ERROR.UNAUTHORIZED").then(function(e){n.warning(e)}):403===t.status?a("RESPONSE_ERROR.FORBIDDEN").then(function(e){n.error(e)}):a("RESPONSE_ERROR.SERVICE_UNAVAILABLE").then(function(e){n.error(e)})}catch(i){console.error(i),a("RESPONSE_ERROR.UNEXPECTED_RESPONSE").then(function(e){n.error(e)})}return e.reject(t)}}}function t(e,t,n,a,i,o,l,r){angular.extend(e.defaults,{control:"hue",position:"top left",letterCase:"uppercase"}),t.defaults.paramSerializer="$httpParamSerializerJQLike",t.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8",t.defaults.headers.put["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8",t.defaults.transformRequest=function(e){return void 0===e?e:$.param(e)},t.interceptors.push("EditorHttpInterceptor");var s={index:{url:"/type?parent&back"},edit:{url:"/type/:pk?parent&back"}},d=[];angular.forEach(r.entities,function(e){var t={};t.name=e.name,t.label=e.label;var n=!1;angular.forEach(e.states,function(e){"index"===e.name&&(n=!0)}),n&&(t.sref=t.name+"_index",d.push(t))}),a.otherwise(r.entities[0].states[0].url?r.entities[0].states[0].url:"/"+r.entities[0].name),a.rule(function(e,t){var n=t.path(),a="/"===n[n.length-1];if(a)return n.substr(0,n.length-1)}),angular.forEach(r.entities,function(e){var t=e.name,a=0;angular.forEach(e.states,function(e){var i=t+"_"+e.name;e.name=t+"_"+e.name;var o=e.url;s[e.name]&&(o=e.url?e.url:s[e.name].url.replace("type",t)),o=o.replace(":pk",":pk"+e.name.split(".").length),function l(e){for(var t=Object.keys(e),n=t.length;n--;){var i=e[t[n]];"component"===t[n]&&(i.$id=i.$id||++a),angular.isObject(i)&&l(i)}}(e),n.state(i,{url:o,reloadOnSearch:!1,templateUrl:"module/components/universalEditor/universalEditor.html",controller:"UniversalEditorController",controllerAs:"vm",params:{pk:null},resolve:{component:function(){return e.component},menu:function(){return d},type:function(){return t}}})})}),i.decorator("mFormatFilter",function(){return function(e,t,n){return moment.isMoment(e)?n?moment.tz(e,n).format(t):e.format(t):""}})}function n(e,t,n,a,i,o,l){var r=document.querySelectorAll(".nav.nav-tabs .item");e.$on("$stateChangeStart",function(e,n,a,i,l,r){o.filterSearchString=r.reload?{}:t.search()}),e.$on("$locationChangeSuccess",function(){}),e.$on("$locationChangeStart",function(){}),e.$on("$stateChangeSuccess",function(e,n,s,d,p){var m=s.type;angular.forEach(r,function(e){$(e).removeClass("active"),$(e).find("a")[0].hash.split("/")[2]==m&&$(e).addClass("active")});var c=n.resolve.type();l.setEntityType(c),a.setEntityType(c),o.filterSearchString&&t.search(o.filterSearchString);var u=a.getStateConfig(n.name);if(u&&"ue-modal"===u.component.name){if(!d.name){var v=n.name.split(".");v.length&&(v.splice(v.length-1,1),d={name:v.join(".")})}angular.extend(u.component.settings,{fromState:d,fromParams:p}),i.open(u.component)}}),1==r.length&&angular.element(r).css("display","none"),angular.element(document).ready(function(){var e=n.params["pk"+a.getLevelChild(n.current.name)];"new"===e&&a.newSourceEntity()})}function a(e){return e}angular.module("universal.editor",["universal.editor.templates","minicolors","datePicker","checklist-model","angularMoment","ngCookies","ngFileUpload","ui.router","ngRaven","ui.mask","toastr","pascalprecht.translate"]),angular.module("universal.editor").factory("EditorHttpInterceptor",e),e.$inject=["$q","$rootScope","toastr","$translate"],angular.module("universal.editor").config(t),t.$inject=["minicolorsProvider","$httpProvider","$stateProvider","$urlRouterProvider","$provide","ConfigDataProviderProvider","$injector","configData"],angular.module("universal.editor").run(n),n.$inject=["$rootScope","$location","$state","EditEntityStorage","ModalService","FilterFieldsStorage","RestApiService"],a.$inject=["ConfigDataProvider"]}(),function(){"use strict";function e(e){var t={RESPONSE_ERROR:{INVALID_DATA:"Неправильно заполнена форма",SERVICE_UNAVAILABLE:"Сервис временно недоступен",UNEXPECTED_RESPONSE:"Сервис вернул неожиданный ответ",UNAUTHORIZED:"Требуется авторизация",RELOAD_PAGE:"Требуется повторная авторизация, перезагрузите страницу",FORBIDDEN:"Нет доступа",NOT_FOUND:"Запись не найдена"},CHANGE_RECORDS:{CREATE:"Запись создана",UPDATE:"Запись обновлена",DELETE:"Запись удалена"},BUTTON:{ADD:"Добавить",DELETE:"Удалить",DELETE_MARK:"Удалить метку",APPLY:"Применить",CLEAN:"Очистить",HIGHER_LEVEL:"На уровень выше",FILTER:"Фильтр"},LOADING:"Загрузка",SELECT_VALUE:"Выберите значение",PERFORMS_ACTIONS:"Выполняется действие",ELEMENT_NO:"Нет элементов для отображения",ELEMENTS:"Элементы",FROM:"из",SEARCH_ELEMENTS:"Поиск по элементам"};e.translations("ru",t),e.useStaticFilesLoader({prefix:"",suffix:""}),e.preferredLanguage("ru")}angular.module("universal.editor").config(e),e.$inject=["$translateProvider"]}(),function(){"use strict";function e(e,t,n,a,i){function o(){angular.isArray(s.listeners)&&s.listeners.forEach(function(e){angular.isFunction(e)&&e()}),t.deleteFieldController(s),n.deleteFilterController(s)}function l(e,t){angular.isArray(t)?angular.forEach(t,function(e){s.error.indexOf(e)<0&&s.error.push(e)}):s.error.indexOf(t)<0&&s.error.push(t)}var r,s=e.vm,d=s.setting.component.settings;s.options&&(s.parentComponentId=s.options.$parentComponentId||"",s.regim=s.options.regim||"edit"),s.fieldName||(s.fieldName=s.setting.name),s.parentField=s.setting.parentField,s.parentFieldIndex=!!angular.isNumber(s.setting.parentFieldIndex)&&s.setting.parentFieldIndex,s.label=d.label||null,s.hint=d.hint||null,s.required=d.required===!0,s.multiple=d.multiple===!0,s.templates=d.templates;var p=/[^\s]+(?=\.html$)/;angular.isObject(s.templates)&&["preview","filter","edit"].forEach(function(t){var n=s.templates[t];angular.isFunction(n)&&(n=n(e)),n&&p.test(n)&&(s.templates[t]=a.get(n),void 0===s.templates[t]&&console.warn("File "+n+" is not found!"))}),s.error=[],r=s.parentField?s.parentFieldIndex?s.parentField+"_"+s.parentFieldIndex+"_"+s.fieldName:s.parentField+"_"+s.fieldName:s.fieldName,s.listeners=[],s.listeners.push(e.$on("editor:api_error_field_"+r,l)),e.onErrorApiHandler=l,e.onDestroyHandler=o,e.$on("$destroy",o)}angular.module("universal.editor").controller("BaseController",e),e.$inject=["$scope","EditEntityStorage","FilterFieldsStorage","$templateCache","$compile"]}(),function(){"use strict";function e(e,t){var n=this,a=t("BaseController",{$scope:e});angular.extend(n,a);var i=e.vm,o=i.setting.component.settings;i.label=o.label,i.action=o.action,i.beforeSend=o.beforeSend,i.success=o.success,i.error=o.error,i.complete=o.complete,i.type=i.setting.type,i.entityId=i.setting.entityId}angular.module("universal.editor").controller("ButtonsController",e),e.$inject=["$scope","$controller"]}(),function(){"use strict";function e(e,t,n,a,i,o,l,r,s,d){function p(){b.fieldValue=b.multiple?[]:null}function m(e){var t;return"date"===y.$fieldType?(t=r(e),b.multiple?[t]:t):(t=angular.isObject(e)&&!angular.isArray(e)&&b.field_id?e[b.field_id]:e,0==t?t:angular.copy(t)||(b.multiple?[]:null))}function c(e){function t(e,t,n){e==t[b.field_id]&&(n?(b.previewValue=b.previewValue||[],b.previewValue.push(t[b.field_search])):b.previewValue=t[b.field_search])}e=e||b.optionValues||[],angular.isArray(b.fieldValue)&&(b.previewValue=[]),null===b.fieldValue||angular.isUndefined(b.fieldValue)||(y.values||y.valuesRemote?angular.isArray(e)&&e.forEach(function(e){angular.isObject(b.fieldValue)&&!angular.isArray(b.fieldValue)&&t(b.fieldValue[b.field_id],e,!1),angular.isArray(b.fieldValue)&&b.fieldValue.forEach(function(n){angular.isObject(n)&&t(n[b.field_id],e,!0),(angular.isNumber(n)||angular.isString(n))&&t(n,e,!0)}),(angular.isNumber(b.fieldValue)||angular.isString(b.fieldValue))&&t(b.fieldValue,e,!1)}):b.previewValue=b.fieldValue)}function u(){var e,t={};return b.multiple?(e=[],b.fieldValue.forEach(function(t){var n,a=m(t);b.multiname&&(n={},n[b.multiname]=a),e.push(n||a)})):e=m(b.fieldValue),b.parentField?(t[b.parentField]={},t[b.parentField][b.fieldName]=e):t[b.fieldName]=e,t}function v(t,n,a){if(!(n.$parentComponentId&&n.$parentComponentId!==b.parentComponentId||b.options.filter)){if(y.depend&&e.$watch(function(){var e=s.getValueField(b.parentComponentId,y.depend),t=!1;return e!==!1&&!function n(e){for(var a=Object.keys(e),i=a.length;i--;){var o=e[a[i]];null!==o&&void 0!==o&&""!==o&&(angular.isObject(o)&&!t?n(o):t=!0)}}(e),t},function(e){e?b.readonly=y.readonly||!1:(b.clear(),b.readonly=!0)},!0),"new"===n.editorEntityType){if(b.newEntityLoaded)return void b.newEntityLoaded();var i={};return b.fieldValue=m(y.defaultValue),b.field_id&&(b.isTree&&(b.fieldValue=[]),y.defaultValue&&!b.isTree&&(i={},i[b.field_id]=y.defaultValue,b.fieldValue=i),n.hasOwnProperty(b.fieldName)&&(b.fieldValue=n[b.fieldName])),void(angular.isFunction(a)&&a())}"exist"===n.editorEntityType&&"preview"===b.regim&&(b.options.$dataIndex||0===b.options.$dataIndex)&&angular.isArray(n.$items)?b.data=n.$items[b.options.$dataIndex]:b.data=n;var o;b.parentField?(o=b.data[b.parentField],angular.isArray(b.data[b.parentField])&&angular.isNumber(b.parentFieldIndex)&&(o=o[b.parentFieldIndex]),o=o[b.fieldName]):o=b.data[b.fieldName],b.multiple?angular.isArray(o)&&(b.fieldValue=[],o.forEach(function(e){b.fieldValue.push(b.multiname?e[b.multiname]:e)})):b.fieldValue=o,angular.isFunction(a)&&a(),c()}}function f(e,t){if(b.error=[],e){if(b.trim&&(b.multiple?b.fieldValue[t]=b.fieldValue[t].trim():b.fieldValue=b.fieldValue.trim(),e=e.trim()),b.hasOwnProperty("maxLength")&&e.length>b.maxLength){var n="Для поля превышено максимальное допустимое значение в "+b.maxLength+" символов. Сейчас введено "+e.length+" символов.";b.error.indexOf(n)<0&&b.error.push(n)}if(b.hasOwnProperty("minLength")&&e.length<b.minLength){var a="Минимальное значение поля не может быть меньше "+b.minLength+" символов. Сейчас введено "+e.length+" символов.";b.error.indexOf(a)<0&&b.error.push(a)}if(b.hasOwnProperty("pattern")&&!e.match(new RegExp(b.pattern))){var i="Введенное значение не соответствует паттерну "+b.pattern.toString();b.error.indexOf(i)<0&&b.error.push(i)}if(b.hasOwnProperty("maxNumber")&&e>b.maxNumber){var o="Для поля превышено максимальное допустимое значение "+b.maxNumber+". Сейчас введено "+e+".";b.error.indexOf(o)<0&&b.error.push(o)}if(b.hasOwnProperty("minNumber")&&e<b.minNumber){var l="Минимальное значение поля не может быть меньше "+b.minNumber+". Сейчас введено "+e+".";b.error.indexOf(l)<0&&b.error.push(l)}if("email"==b.contentType&&!e.match($)){var r="Введен некорректный email.";b.error.indexOf(r)<0&&b.error.push(r)}if("url"==b.contentType&&!e.match(w)){var s="Введен некорректный url.";b.error.indexOf(s)<0&&b.error.push(s)}}}var g=this,h=a("BaseController",{$scope:e});angular.extend(g,h);var b=e.vm,y=b.setting.component.settings,$=new RegExp("^[-a-z0-9~!$%^&*_=+}{'?]+(.[-a-z0-9~!$%^&*_=+}{'?]+)*@([a-z0-9_][-a-z0-9_]*(.[-a-z0-9_]+[a-z][a-z])|([0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}))(:[0-9]{1,5})?$","i"),w=new RegExp("^(?:(?:ht|f)tps?://)?(?:[\\-\\w]+:[\\-\\w]+@)?(?:[0-9a-z][\\-0-9a-z]*[0-9a-z]\\.)+[a-z]{2,6}(?::\\d{1,5})?(?:[?/\\\\#][?!^$.(){}:|=[\\]+\\-/\\\\*;&~#@,%\\wА-Яа-я]*)?$","i");b.readonly=y.readonly===!0,b.multiname=y.multiname||null,b.depend=y.depend||null,b.width=isNaN(+y.width)?null:y.width,b.defaultValue=m(y.defaultValue),b.placeholder=y.placeholder||null,b.classComponent="col-lg-4 col-md-4 col-sm-4 col-xs-4 clear-padding-left",b.inputLeave=f;var C=y.values,x=y.valuesRemote;(C||x)&&(b.field_id="id",b.field_search="title",b.optionValues&&(C?(angular.forEach(y.values,function(e,t){var n={};n[b.field_id]=t,n[b.field_search]=e,angular.isArray(y.values)&&(n[b.field_id]=e),b.optionValues.push(n)}),c(),y.$loadingPromise=d.when(b.optionValues)):x&&(x.fields&&(b.field_id=x.fields.value||b.field_id,b.field_search=x.fields.label||b.field_id),b.loadingData=!0,y.$loadingPromise?(y.$optionValues&&y.$optionValues.length&&(b.loadingData=!1,b.optionValues=y.$optionValues),c()):y.$loadingPromise=l.getUrlResource(x.url).then(function(e){return angular.forEach(e.data.items,function(e){b.optionValues.push(e)}),y.$optionValues=b.optionValues,b.optionValues},function(e){console.error(b.constructor.name+': Не удалось получить значения для поля "'+b.fieldName+'" с удаленного ресурса')})["finally"](function(){b.loadingData=!1})))),b.fieldValue=m(b.defaultValue),b.cols=b.width,b.options.filter&&(b.multiple=!1,b.readonly=!1,b.required=!1,b.fieldValue=null,b.cols=12),b.cols&&(b.cols>12&&(b.cols=12,console.warn("Значение длины для поля "+b.label+" превышает максимальное значение сетки (12).")),b.cols<1&&(b.cols=1,console.warn("Значение длины для поля "+b.label+" ниже минимального значения сетки (1).")),b.classComponent="col-lg-"+b.cols+" col-md-"+b.cols+" col-sm-"+b.cols+" col-xs-"+b.cols+" clear-padding-left"),b.options.filter?o.addFilterController(b):s.addFieldController(b),b.listeners.push(e.$watch(function(){return b.fieldValue},function(){b.error=[]},!0)),b.options.filter&&e.$watch(function(){return n.search()},function(t){if(t&&t.filter){var n=JSON.parse(t.filter);y.$parseFilter(e.vm,n[b.parentComponentId])}}),b.clear=p,b.getFieldValue=u,b.equalPreviewValue=c,e.onLoadDataHandler=v,b.typeInput="text",b.validators=b.setting.component.settings.validators,angular.forEach(b.setting.component.settings.validators,function(e){switch(e.type){case"string":b.minLength=e.minLength,b.maxLength=e.maxLength,b.pattern=e.pattern,b.trim=e.trim,b.contentType=e.contentType;break;case"number":b.typeInput="number",b.minNumber=e.min,b.maxNumber=e.max,b.stepNumber=e.step;break;case"date":b.minDate=e.minDate,b.maxDate=e.maxDate,b.format=e.format;break;case"mask":b.isMask=!0,b.maskDefinitions=e.maskDefinitions,b.mask=e.mask}})}angular.module("universal.editor").controller("FieldsController",e),e.$inject=["$scope","$rootScope","$location","$controller","$timeout","FilterFieldsStorage","RestApiService","moment","EditEntityStorage","$q"]}(),angular.module("universal.editor").directive("onRenderTemplate",["$timeout","$compile",function(e,t){return{restrict:"A",scope:!1,link:function(n,a,i){function o(e,i){a.html(t(angular.element(i))(n))}var l=n.vm;e(function(){angular.isObject(l.templates)?l.templates.filter&&a.hasClass("component-filter")?o(a,l.templates.filter):l.templates.edit&&a.hasClass("component-edit")?o(a,l.templates.edit):l.templates.preview&&a.hasClass("component-preview")?o(a,l.templates.preview):a.hasClass("button-template")?o(a,l.templates):a.remove():a.remove()})}}}]),function(){"use strict";function e(e){var t=function(e){this.scope=e.$new(),this.scope.setting=e.setting,this.scope.options=e.options};return t.prototype.build=function(){var t="<"+this.scope.setting.component.name+' class="field-wrapper-'+this.scope.setting.component.name+'" data-setting="setting" data-options="options"></'+this.scope.setting.component.name+">";return e(t)(this.scope)},t}angular.module("universal.editor").factory("ComponentBuilder",e),e.$inject=["$compile"]}(),function(){"use strict";function e(e){return{getDefaultEntity:function(){return e.entities[0].name},$get:["$q",function(t){var n=t.defer();return n.resolve(e),n}]}}angular.module("universal.editor").provider("ConfigDataProvider",e),e.$inject=["configData"]}(),function(){"use strict";function e(e){function t(t){if(!t)return t;var n=t.split(".");return e[n[0]][n[1]]}var n=this;n.getCallback=t}angular.module("universal.editor").service("ButtonsService",e),e.$inject=["$window"]}(),function(){"use strict";function e(e,t,n,a,i){var o,l,r=[],s=this,d={};this.actionType="create",this.getLevelChild=function(e){return e.split(".").length},this.getValueField=function(e,t){for(var n=d[e]||[],a=n.length;a--;){var i=n[a];if(i.fieldName===t)return i.getFieldValue()}return!1},this.newSourceEntity=function(t,n){var i,o=a.search().parent;o&&(o=JSON.parse(o),i=o[t]||null);var l={editorEntityType:"new",$parentComponentId:n?void 0:t};i&&n&&(l[n]=i),e.$broadcast("editor:entity_loaded",l)},this.setSourceEntity=function(t){t.editorEntityType="exist",e.$broadcast("editor:entity_loaded",t)},this.getEntityType=function(){return o},this.setEntityType=function(e){o=e},this.addFieldController=function(e){var t=e.parentComponentId;t&&(d[t]=d[t]||[],d[t].push(e),e.$fieldHash=Math.random().toString(36).substr(2,15))},this.deleteFieldController=function(e){var t=d[e.parentComponentId];t&&angular.forEach(t,function(n,a){n.$fieldHash===e.$fieldHash&&t.splice(a,1)})},this.setActionType=function(e){this.actionType=e},this.editEntityUpdate=function(t,n){this.setActionType(n.entityType);var a={},i=d[n.options.$parentComponentId]||[],o=!0;if(angular.forEach(i,function(e){var t=e.getFieldValue();if(e.multiple){var n=!0;angular.forEach(e.fieldValue,function(t,a){n&&(e.inputLeave(t,a),0!==e.error.length&&(n=!1))})}else e.inputLeave(e.fieldValue);o=0===e.error.length&&o,e.hasOwnProperty("readonly")&&e.readonly!==!1||(e.parentField&&e.parentFieldIndex!==!1?(a[e.parentField]=a[e.parentField]||[],a[e.parentField][e.parentFieldIndex]=a[e.parentField][e.parentFieldIndex]||{},angular.merge(a[e.parentField][e.parentFieldIndex],t[e.parentField])):angular.merge(a,t))}),o)switch(n.data=a,t){case"create":e.$emit("editor:create_entity",n);break;case"update":e.$emit("editor:update_entity",n)}},this.editEntityPresave=function(t){var n={},a=!0,i=d[t.options.$parentComponentId]||[];angular.forEach(i,function(e){var t=e.getFieldValue();if(e.multiple){var i=!0;angular.forEach(e.fieldValue,function(t,n){i&&(e.inputLeave(t,n),0!==e.error.length&&(i=!1))})}else e.inputLeave(e.fieldValue);a=0===e.error.length&&a,e.hasOwnProperty("readonly")&&e.readonly!==!1||(e.parentField&&e.parentFieldIndex!==!1?(n[e.parentField]=n[e.parentField]||[],n[e.parentField][e.parentFieldIndex]=n[e.parentField][e.parentFieldIndex]||{},angular.merge(n[e.parentField][e.parentFieldIndex],t[e.parentField])):angular.merge(n,t)),e.hasOwnProperty("readonly")&&e.readonly!==!1||angular.merge(n,e.getFieldValue())}),a&&(t.data=n,e.$emit("editor:presave_entity",t))},this.getEntity=function(e,t){return n.entities.filter(function(e){return e.name===o})[0]},this.getStateConfig=function(e,t){t=t||o;var a=null;return 0!==e.indexOf(t+"_")&&(e=t+"_"+e),angular.forEach(n.entities,function(n){n.name===t&&angular.forEach(n.states,function(n){n.name&&(0!==n.name.indexOf(t+"_")&&(n.name=t+"_"+n.name),n.name===e&&(a=n))})}),a},e.$on("editor:add_entity",function(e,t){s.actionType=t}),e.$on("editor:set_entity_type",function(e,t){l=t,r=[]})}angular.module("universal.editor").service("EditEntityStorage",e),e.$inject=["$rootScope","$timeout","configData","$location","$state"]}(),function(){"use strict";function e(e,t,n){function a(e){var t=e.parentComponentId;t&&(d[t]=d[t]||[],d[t].push(e),e.$fieldHash=Math.random().toString(36).substr(2,15))}function i(e){var t=e.parentComponentId;if(t){var n=d[t];n&&angular.forEach(n,function(t,a){t.$fieldHash===e.$fieldHash&&n.splice(a,1)})}}function o(e){d[e]&&(angular.forEach(d[e],function(e){e.clear()}),l(e))}function l(e){var t=d[e],n={};return angular.forEach(t,function(e){var t=e.setting.component.settings,a=e.options.filterParameters.operator,i=(e.getFieldValue(),t.$toFilter(a,e.getFieldValue()));angular.extend(n,i)}),$.isEmptyObject(n)?(delete p[e],n=!1):p[e]=angular.copy(n),n}function r(e){return p[e]}var s,d={},p=[],m=this;angular.extend(m,{addFilterController:a,deleteFilterController:i,clearFiltersValue:o,calculate:l,getFilterQueryObject:r}),e.$on("editor:set_entity_type",function(e,t){s=t})}angular.module("universal.editor").service("FilterFieldsStorage",e),e.$inject=["$rootScope","$timeout","configData"]}(),function(){"use strict";function e(e,t,n,a,i,o,l,r,s,d,p){function m(e){f=e.settings,g.options.$parentComponentId&&o.search("relativeEntityId",g.options.$parentComponentId),v=p.open({component:"ueModal",resolve:{settings:function(){return f},$parentComponentId:function(){return g.options.$parentComponentId||o.search().relativeEntityId}}}),v.rendered.then(function(){h=!0;var e=r.params["pk"+i.getLevelChild(r.current.name)];"new"===e&&i.newSourceEntity(g.options.$parentComponentId),g.fromState=f.fromState||null}),v.result.then(u,u)}function c(){return h}function u(e){if(console.log("closes"),h){var n=g.options.$parentComponentId;h=!1,v&&v.close(),v=null,o.search("relativeEntityId",null),g.options=null,f.fromState&&r.go(f.fromState.name,f.fromParams,{reload:!1}).then(function(){console.log(e),e||t.$broadcast("editor:read_entity",n)}),f=null}}var v,f,g=this,h=!1;g.close=u,g.open=m,g.isModalOpen=c,g.options={},g.fromState=null}angular.module("universal.editor").service("ModalService",e),e.$inject=["$q","$rootScope","$http","configData","EditEntityStorage","$location","$timeout","$state","$httpParamSerializer","$document","$uibModal"]}(),function(){"use strict";function e(e,t,n,a,i,o,l,r,s,d,p,m,c,u){function v(t,n){var a=e.defer();return I[t]=I[t]||{},I[t][n]&&I[t][n].resolve(),I[t][n]=a,a}function f(){u("CHANGE_RECORDS.DELETE").then(function(e){c.success(e)})}function g(){u("CHANGE_RECORDS.UPDATE").then(function(e){c.success(e)})}function h(){u("CHANGE_RECORDS.CREATE").then(function(e){c.success(e)})}function b(){u("CHANGE_RECORDS.CREATE").then(function(e){c.success(e)})}var y,w,C,x,V,E,S=this,I=[];S.isProcessing=!1,S.methodType="",S.editedEntityId=null,t.$on("editor:set_entity_type",function(e,t){V=t,x="items"}),t.$on("editor:create_entity",function(e,t){S.addNewItem(t)}),t.$on("editor:update_entity",function(e,t){S.updateItem(t)}),t.$on("editor:presave_entity",function(e,t){S.presaveItem(t)}),this.getQueryParams=function(){try{return JSON.parse(JSON.stringify(w))}catch(e){return{}}},this.setQueryParams=function(e){w=Object.keys(e).length>0?e:void 0},this.setFilterParams=function(e){C=Object.keys(e).length>0?e:void 0},this.getItemsList=function(a){var i=v(a.options.$parentComponentId,"read");a.options.isLoading=!0;var o=e.defer(),l="GET",r=a.url,s=a.params||{};l=a.method||l,a.options&&void 0!==a.options.sort&&(s.sort=a.options.sort);var d,m=a.options.$parentComponentId,c=p.getFilterQueryObject(m);a.childId&&(c=c||{},c[a.parentField]=a.childId),angular.isFunction(p.callbackBeforeSend)&&(d=p.callbackBeforeSend,delete p.callbackBeforeSend),c?angular.extend(s,{filter:JSON.stringify(c)}):delete s.filter,a.options.mixedMode&&(s=s||{},angular.extend(s,{mixed:a.options.mixedMode.entityType})),V.dataSource.hasOwnProperty("parentField")&&(s=s||{},s.hasOwnProperty("filter")||(s.root=!0)),!V.dataSource.hasOwnProperty("sortBy")||s.hasOwnProperty(V.dataSource.sortBy)||s.sort||(s=s||{},angular.extend(s,{sort:V.dataSource.sortBy})),s.hasOwnProperty("filter")&&delete s.root;var u=[];return angular.forEach(V.dataSource.fields,function(e){e.hasOwnProperty("expandable")&&e.expandable===!0&&u.push(e.name)}),u.length>0&&(s.expand=u.join(",")),s["per-page"]=8,n({method:l,url:r,params:s,timeout:i.promise,beforeSend:d}).then(function(e){0===e.data[x].length&&t.$broadcast("editor:parent_empty"),e.data.$parentComponentId=a.options.$parentComponentId,t.$broadcast("editor:items_list",e.data),a.options.isLoading=!1,o.resolve()},function(e){a.options.isLoading=!1,o.reject()}),o.promise},this.getData=function(e,t){return n({method:"GET",url:e,params:t})},this.addNewItem=function(e){if(!e.options.isLoading){var a=V.dataSource.fields.parent;if(a&&o.search().parent){var i=!d[0].querySelector(".field-wrapper [name='"+a+"']");i&&(e.data[a]=o.search().parent)}e.options.isLoading=!0;var l="POST",s=V.dataSource.url,p="id",c=y;V.dataSource.hasOwnProperty("fields")&&(p=V.dataSource.fields.primaryKey||p),n({method:e.method||l,url:e.method||s,data:e.data}).then(function(n){var a={id:n.data[p],$parentComponentId:e.options.$parentComponentId};t.$broadcast("editor:presave_entity_created",a),e.options.isLoading=!1,t.$broadcast("uploader:remove_session"),t.$broadcast("editor:entity_success"),b();var i={};o.search().parent&&(i.parent=o.search().parent),o.search().back&&(i.type=o.search().back,c=o.search().back),m.isModalOpen()?m.close():r.go(c+"_index",i).then(function(){o.search(i),t.$broadcast("editor:read_entity",e.options.$parentComponentId)})},function(n){var a=n.data.hasOwnProperty("data")?n.data.data:n.data;a.length>0&&angular.forEach(a,function(e){e.hasOwnProperty("field")&&(t.$broadcast("editor:api_error_field_"+e.field,e.message),e.hasOwnProperty("fields")&&angular.forEach(e.fields,function(n,a){t.$broadcast("editor:api_error_field_"+e.field+"_"+a+"_"+n.field,n.message)}))}),e.options.isLoading=!1})}},this.updateItem=function(e){if(!e.options.isLoading){e.options.isLoading=!0;var a="PUT",i=V.dataSource.url+"/"+S.editedEntityId,l=y,s="id";n({method:e.method||a,url:e.url||i,data:e.data||{}}).then(function(n){var a={id:n.data[s],$parentComponentId:e.options.$parentComponentId};t.$broadcast("editor:presave_entity_updated",a),e.options.isLoading=!1,t.$broadcast("uploader:remove_session"),t.$broadcast("editor:entity_success"),g();var i={};o.search().parent&&(i.parent=o.search().parent),o.search().back&&(i.type=o.search().back,l=o.search().back),m.isModalOpen()?m.close():r.go(l+"_index",i).then(function(){o.search(i),t.$broadcast("editor:read_entity",e.options.$parentComponentId)})},function(n){var a=n.data.hasOwnProperty("data")?n.data.data:n.data;a.length>0&&angular.forEach(a,function(e){e.hasOwnProperty("field")&&(t.$broadcast("editor:api_error_field_"+e.field,e.message),e.hasOwnProperty("fields")&&angular.forEach(e.fields,function(n,a){t.$broadcast("editor:api_error_field_"+e.field+"_"+a+"_"+n.field,n.message)}))}),e.options.isLoading=!1})}},this.presaveItem=function(e){var a,l="POST",s="id",d=!0;e.options.isLoading||(e.options.isLoading=!0,""!==S.editedEntityId?(a=V.dataSource.url+"/"+S.editedEntityId,l="PUT",d=!1):a=V.dataSource.url,V.dataSource.hasOwnProperty("fields")&&(s=V.dataSource.fields.primaryKey||s),n({method:e.method||l,url:e.url||a,data:e.data||{}}).then(function(n){e.options.isLoading=!1;var a=n.data[s],l={};l["pk"+i.getLevelChild(r.current.name)]=a;var p=o.search();r.go(r.current.name,l,{reload:!1,notify:!1}).then(function(){o.search(p),t.$broadcast("editor:read_entity",e.options.$parentComponentId)});var m={id:a,$parentComponentId:e.options.$parentComponentId};d?(t.$broadcast("editor:presave_entity_created",m),h()):(g(),t.$broadcast("editor:presave_entity_updated",m))},function(n){if((422===n.status||400===n.status)&&n.data){var a=n.data.hasOwnProperty("data")?n.data.data:n.data;angular.forEach(a,function(e){e.hasOwnProperty("field")&&(t.$broadcast("editor:api_error_field_"+e.field,e.message),e.hasOwnProperty("fields")&&angular.forEach(e.fields,function(n,a){t.$broadcast("editor:api_error_field_"+e.field+"_"+a+"_"+n.field,n.message)}))})}e.options.isLoading=!1}))},this.getItemById=function(e,t,a){var o={};a.isLoading=!0;var l=[];angular.forEach(V.dataSource.fields,function(e){e.hasOwnProperty("expandable")&&e.expandable===!0&&l.push(e.name)}),l.length>0&&(o.expand=l.join(",")),n({method:"GET",url:V.dataSource.url+"/"+e,params:o}).then(function(e){a.isLoading=!1,e.data.$parentComponentId=a.$parentComponentId,i.setSourceEntity(e.data)},function(e){a.isLoading=!1})},this.deleteItemById=function(e){if(!e.options.isLoading){var i=V.dataSource.url,l=y;e.options.isMix&&(i=e.options.mixedMode.dataSource.url),e.options.isLoading=!0;var s=i+"/"+e.entityId;if("edit"===e.setting.buttonClass&&(s=i.replace(":pk",e.entityId)),"mix"===e.type){var d=a.entities.filter(function(e){return e.name===E.entity})[0];s=d.dataSource.url+"/"+e.entityId}return n({method:e.method||"DELETE",url:e.url||s,params:e.params||{}}).then(function(n){e.options.isLoading=!1,S.setQueryParams({}),S.setFilterParams({}),t.$broadcast("editor:entity_success_deleted"),f();var a={};o.search().parent&&(a.parent=o.search().parent),o.search().back&&(a.type=o.search().back,l=o.search().back),m.isModalOpen()?m.close():r.go(l+"_index",a).then(function(){o.search(a),t.$broadcast("editor:read_entity",e.options.$parentComponentId)})},function(t){e.options.isLoading=!1})}},this.getUrlResource=function _(t,a,i,o,l,r){function s(e,t){return n({method:"GET",url:e,params:{page:t||1,"per-page":50}})}var d=o||e.defer(),p=i||[],m=[];if(l=l||1,r=r||0,12===l&&(l=11),r)for(var c=l;c<=r;c++)m.push(s(t,c));else m.push(s(t));return e.all(m).then(function(e){for(var n,i,o=e.length;o--;)n=e[o],p=p.concat(n.data.items),angular.isFunction(a)&&a(n.data.items);return n&&n.data._meta&&(i=n.data._meta.pageCount),i&&i!==r&&1!==i?(1===l?l=2:l+=2===l?4:5,r+=5,r>i&&(r=i),_(t,a,p,d,l,r)):void d.resolve({data:{items:p}})},function(e){}),d.promise},this.actionRequest=function(t){var a=e.defer(),i=t.params||{},o=t.url;return t.id&&(o=t.url.replace(":id",id)),S.isProcessing=!0,n({method:t.method,url:o,params:i,beforeSend:t.beforeSend}).then(function(e){S.isProcessing=!1,a.resolve(e)},function(e){S.isProcessing=!1,a.reject(e)}),a.promise},this.loadChilds=function(e){var n={parentId:e.id,$parentComponentId:e.options.$parentComponentId};t.$broadcast("editor:parent_id",n),e.childId=e.id,S.getItemsList(e).then(function(){parent=o.search().parent,parent&&(parent=JSON.parse(parent)),e.childId&&(parent=parent||{},parent[e.options.$parentComponentId]=e.childId);var t=parent?JSON.stringify(parent):null;o.search("parent",t)})},this.loadParent=function(e){function a(){e.options.isLoading=!1,e.parentField=null,t.$broadcast("editor:parent_id",i);var n=null;parent=o.search().parent,parent&&(parent=JSON.parse(parent),delete parent[e.options.$parentComponentId],$.isEmptyObject(parent)||(n=JSON.stringify(parent))),o.search("parent",n),e.childId=null,S.getItemsList(e)}var i={$parentComponentId:e.options.$parentComponentId},l="undefined"!=typeof e.childId?e.childId:void 0;l?(e.options.isLoading=!0,n({method:"GET",url:e.url+"/"+l}).then(function(n){var a=n.data[e.parentField];parent=o.search().parent,parent&&(parent=JSON.parse(parent)),a?(parent=parent||{},parent[e.options.$parentComponentId]=a):delete parent[e.options.$parentComponentId];var l=null;$.isEmptyObject(parent)||(l=JSON.stringify(parent)),o.search("parent",l),e.options.isLoading=!1,i.parentId=a,t.$broadcast("editor:parent_id",i),e.childId=a,S.getItemsList(e)},function(t){e.options.isLoading=!1})):a()},this.setEntityType=function(e){y=e},this.getEntityType=function(){return y},this.getEntityObject=function(){return V},this.getMixModeByEntity=function(){var e={};return e.existence=!1,a.hasOwnProperty("mixedMode")&&angular.forEach(a.mixedMode,function(t){t.entities[0]==y&&(e.existence=!0,e.entity=t.entities[1],e.entityTypeName=t.fields.type,e.prependIcon=t.fields.prependIcon)}),e}}angular.module("universal.editor").service("RestApiService",e),e.$inject=["$q","$rootScope","$http","configData","EditEntityStorage","$location","$timeout","$state","$httpParamSerializer","$document","FilterFieldsStorage","ModalService","toastr","$translate"]}(),function(){"use strict";var e={bindings:{setting:"=",entityId:"@",buttonClass:"@",options:"="},controller:"ComponentWrapperController",controllerAs:"vm"};angular.module("universal.editor").component("componentWrapper",e)}(),function(){"use strict";function e(e,t,n){var a=this;t.setting=a.setting,t.setting.entityId=a.entityId,t.setting.buttonClass=a.buttonClass,t.options=a.options||{},this.$postLink=function(){e.on("$destroy",function(){t.$destroy()});var a=new n(t).build();e.addClass("component-wrapper"),e.append(a)}}angular.module("universal.editor").controller("ComponentWrapperController",e),
e.$inject=["$element","$scope","ComponentBuilder"]}(),function(){"use strict";var e={bindings:{setting:"=",options:"="},template:["$templateCache",function(e){return e.get("module/components/ueAutocomplete/ueAutocomplete.html")}],controller:"UeAutocompleteController",controllerAs:"vm"};angular.module("universal.editor").component("ueAutocomplete",e)}(),function(){"use strict";function e(e,t,n,a,i,o,l,r){function s(e){if(u.error=[],!(""===e||e.length<=u.minCount))if(u.searching=!0,v.hasOwnProperty("values"))angular.forEach(v.values,function(t,n){var a={};angular.isArray(v.values)?a[u.field_id]=t:a[u.field_id]=n,a[u.field_search]=t,t.toLowerCase().indexOf(e.toLowerCase())>=0&&!d(a,u.selectedValues)&&u.possibleValues.push(a)}),u.activeElement=0,u.searching=!1;else{var t={};t[u.field_search]="%"+e+"%",i.getUrlResource(v.valuesRemote.url+"?filter="+JSON.stringify(t)).then(function(e){angular.forEach(e.data.items,function(e){d(e,u.selectedValues)||d(e,u.possibleValues)||u.possibleValues.push(e)}),u.activeElement=0,u.searching=!1},function(e){console.error('EditorFieldAutocompleteController: Не удалось получить значения для поля "'+u.fieldName+'" с удаленного ресурса'),u.searching=!1})}}function d(e,t){return!!t&&t.filter(function(t){return t[u.field_id]==e[u.field_id]}).length}function p(){if(u.preloadedData=!1,v.hasOwnProperty("values"))angular.forEach(v.values,function(e,t){var n={};Array.isArray(u.fieldValue)&&u.fieldValue.indexOf(t)>=0&&u.multiple?(angular.isArray(v.values)?n[u.field_id]=e:n[u.field_id]=t,n[u.field_search]=e,u.selectedValues.push(n)):u.fieldValue!=t&&u.fieldValue!=e||u.multiple||(angular.isArray(v.values)?n[u.field_id]=e:n[u.field_id]=t,n[u.field_search]=e,u.selectedValues.push(n),u.placeholder=n[u.field_search])}),u.preloadedData=!0;else if(v.hasOwnProperty("valuesRemote")){if(!u.fieldValue)return void(u.preloadedData=!0);var e={};angular.isArray(u.fieldValue)?e[u.field_id]=u.fieldValue:(e[u.field_id]=[],e[u.field_id].push(u.fieldValue)),i.getUrlResource(v.valuesRemote.url+"?filter="+JSON.stringify(e)).then(function(e){angular.forEach(e.data.items,function(e){Array.isArray(u.fieldValue)&&(u.fieldValue.indexOf(e[u.field_id])>=0||u.fieldValue.indexOf(String(e[u.field_id]))>=0)&&u.multiple&&!d(e,u.selectedValues)?u.selectedValues.push(e):u.fieldValue!=e[u.field_id]||u.multiple||(u.selectedValues.push(e),u.placeholder=e[u.field_search])}),u.preloadedData=!0},function(e){u.preloadedData=!0,console.error('EditorFieldAutocompleteController: Не удалось получить значения для поля "'+u.fieldName+'" с удаленного ресурса')})}else u.preloadedData=!0,console.error("EditorFieldAutocompleteController: Для поля не указан ни один тип получения значений ( локальный или удаленный )")}function m(){u.fieldValue=u.multiple?[]:null,t.find(".autocomplete-field-search").removeClass("hidden"),u.inputValue="",u.sizeInput=1,u.selectedValues=[],u.placeholder=""}var c,u=this;u.optionValues=[],angular.extend(u,r("FieldsController",{$scope:e}));var v=u.setting.component.settings;u.selectedValues=[],u.inputValue="",u.possibleValues=[],u.activeElement=0,u.preloadedData=!0,u.searching=!1,u.maxItemsCount=v.maxItems||Number.POSITIVE_INFINITY,u.minCount=v.minCount||2,u.sizeInput=1,u.classInput={width:"1px"},u.showPossible=!1,u.multiple||(u.classInput.width="99%",u.classInput["padding-right"]="25px"),u.options.filter&&p(),t.find("input").bind("keydown",function(e){var n;switch(e.which){case 13:if(e.preventDefault(),u.possibleValues.length<1)break;o(function(){u.addToSelected(e,u.possibleValues[u.activeElement])},0);break;case 40:if(e.preventDefault(),u.possibleValues.length<1)break;n=angular.element(t[0].getElementsByClassName("possible-scroll")[0]),u.activeElement<u.possibleValues.length-1&&(o(function(){u.activeElement++},0),o(function(){var e=angular.element(n[0].getElementsByClassName("active")[0])[0].offsetTop,t=angular.element(n[0].getElementsByClassName("active")[0])[0].clientHeight,a=n[0].scrollTop,i=n[0].clientHeight;e>=i+a-t&&(n[0].scrollTop+=t+1)},1));break;case 38:if(e.preventDefault(),u.possibleValues.length<1)break;n=angular.element(t[0].getElementsByClassName("possible-scroll")[0]),u.activeElement>0&&(o(function(){u.activeElement--},0),o(function(){var e=angular.element(n[0].getElementsByClassName("active")[0])[0].offsetTop,t=angular.element(n[0].getElementsByClassName("active")[0])[0].clientHeight,a=n[0].scrollTop;n[0].clientHeight;e<a&&(n[0].scrollTop-=t+1)},1))}}),u.listeners.push(e.$on("editor:entity_loaded",function(t,n){u.loadingData=!0,e.onLoadDataHandler(t,n),v.$loadingPromise.then(function(e){u.optionValues=e,u.equalPreviewValue()})["finally"](function(){u.loadingData=!1})})),u.listeners.push(e.$watch(function(){return u.inputValue},function(e){e&&(c&&o.cancel(c),u.showPossible=!0,u.possibleValues=[],u.multiple&&(u.sizeInput=e.length||1,1===u.sizeInput&&1!=e.length?u.classInput.width="1px":u.classInput.width="initial"),c=o(function(){s(e)},300))},!0)),u.addToSelected=function(e,n){u.multiple?u.fieldValue.push(n[u.field_id]):(u.selectedValues=[],u.placeholder=n[u.field_search],u.fieldValue=n[u.field_id]),u.selectedValues.push(n),t.find(".autocomplete-field-search").removeClass("hidden"),u.inputValue="",u.sizeInput=1,u.possibleValues=[],e&&!u.multiple&&e.stopPropagation()},u.removeFromSelected=function(e,t){u.multiple||(u.fieldValue=null),angular.forEach(u.selectedValues,function(e,n){e[u.field_id]==t[u.field_id]&&(u.selectedValues.splice(n,1),u.multiple?u.fieldValue.splice(n,1):u.placeholder="")})},u.focusPossible=function(e){u.isActivePossible=e,u.multiple||t.find(".autocomplete-item").length>0&&(e?(t.find(".autocomplete-field-search").removeClass("hidden"),t.find(".autocomplete-item").addClass("opacity-item")):(t.find(".autocomplete-field-search").addClass("hidden"),t.find(".autocomplete-item").removeClass("opacity-item")))},u.deleteToAutocomplete=function(e){8==e.which&&u.selectedValues&&u.selectedValues.length&&!u.inputValue&&u.multiple&&u.removeFromSelected(e,u.selectedValues[u.selectedValues.length-1])},this.$postLink=function(){n.on("click",function(n){t[0].contains(n.target)||e.$apply(function(){u.showPossible=!1})}),e.inputFocus=function(){u.multiple||(t.find(".autocomplete-field-search").removeClass("hidden"),t.find(".autocomplete-item").addClass("opacity-item")),u.showPossible=!0,t.find("input")[0].focus()},t.on("$destroy",function(){e.$destroy()})},u.clear=m}angular.module("universal.editor").controller("UeAutocompleteController",e),e.$inject=["$scope","$element","$document","EditEntityStorage","RestApiService","$timeout","FilterFieldsStorage","$controller"]}(),function(e){try{e=angular.module("universal.editor.templates")}catch(t){e=angular.module("universal.editor.templates",[])}e.run(["$templateCache",function(e){e.put("module/components/ueAutocomplete/ueAutocomplete.html","\n<div ng-class=\"{'field-wrapper row':!vm.options.filter, 'filter-wrapper-field': vm.options.filter}\">\n    <div on-render-template=\"on-render-template\" ng-class=\"{'component-filter': vm.options.filter,                   'component-edit': ((vm.templates.edit &amp;&amp; !vm.options.filter) || (vm.templates.filter &amp;&amp; vm.options.filter)) &amp;&amp; vm.regim === 'edit',                   'component-preview': vm.templates.preview &amp;&amp; vm.regim === 'preview'}\" class=\"component-template\"></div>\n    <div ng-if=\"((!vm.templates.edit &amp;&amp; !vm.options.filter) || (!vm.templates.filter &amp;&amp; vm.options.filter)) &amp;&amp; vm.regim === 'edit'\" ng-class=\"{'component-filter': vm.options.filter}\" class=\"component-edit\"> \n"+'        <label ng-if="!vm.options.filter &amp;&amp; !!vm.label" class="field-name-label">\n            <div data-ng-if="!!vm.hint" class="field-hint">\n                <div ng-bind="vm.hint" class="hint-text"></div>\n            </div><span data-ng-class="{\'editor-required\': vm.required}" ng-bind="vm.label"></span>\n        </label>\n        <div ng-class="{\'filter-inner-wrapper\': vm.options.filter, \'field-element\': !vm.options.filter}" ng-style="{\'overflow:auto\':vm.multiple}"> \n            <div ng-class="vm.classComponent">\n                <div data-ng-class="{&quot;active&quot; : vm.isActivePossible}" data-ng-click="inputFocus()" class="autocomplete-input-wrapper form-control">\n                    <div data-ng-repeat="acItem in vm.selectedValues" data-ng-show="acItem[vm.field_search]" data-ng-if="vm.multiple" class="autocomplete-item">{{acItem[vm.field_search]}}<span data-ng-click="vm.removeFromSelected($event, acItem)" data-ng-if="!vm.readonly" class="remove-from-selected">×</span></div>\n                    <input ng-show="vm.preloadedData" type="text" ng-disabled="vm.readonly" data-ng-model="vm.inputValue" data-ng-focus="vm.focusPossible(true)" data-ng-blur="vm.focusPossible(false)" size="{{vm.sizeInput}}" data-ng-style="vm.classInput" data-ng-keydown="vm.deleteToAutocomplete($event)" placSeholder="{{vm.placeholder}}" data-ng-class="!vm.isActivePossible ? &quot;color-placeholder&quot; : &quot;&quot;" class="autocomplete-field-search"/><span data-ng-if="!vm.multiple &amp;&amp; !!vm.selectedValues.length" data-ng-click="vm.removeFromSelected($event, vm.selectedValues[0])" class="selecte-delete selecte-delete-autocomplete">×</span>\n                    <div data-ng-show="vm.searching || !vm.preloadedData" class="loader-search-wrapper">\n                        <div class="loader-search">{{\'LOADING\' | translate}}</div>\n                    </div>\n                    <div data-ng-if="!vm.readonly &amp;&amp; (vm.possibleValues.length &gt; 0) &amp;&amp; vm.showPossible" class="possible-values possible-autocomplete active possible-bottom">\n                        <div class="possible-scroll">\n                            <div data-ng-repeat="possible in vm.possibleValues" data-ng-mouseover="vm.activeElement = $index" data-ng-click="vm.addToSelected($event, possible)" data-ng-class="vm.activeElement == $index ? \'active\' : \'\'" class="possible-value-item">{{possible[vm.field_search]}}</div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div ng-if="!vm.templates.preview &amp;&amp; vm.regim === \'preview\'" class="component-preview"> \n        <div data-ng-show="vm.loadingData" class="loader-search-wrapper">\n            <div class="loader-search">{{\'LOADING\' | translate}}</div>\n        </div><span ng-bind="vm.previewValue" data-ng-show="!vm.loadingData" ng-if="!vm.multiple"></span>\n        <div ng-repeat="value in vm.previewValue track by $index" data-ng-show="!vm.loadingData" ng-if="vm.multiple"><span ng-bind="value"></span></div>\n    </div>\n    <div ng-if="!vm.options.filter" class="field-error-wrapper">\n        <div data-ng-repeat="err in vm.error track by $index" class="error-item alert alert-danger">{{err}}</div>\n    </div>\n</div>')}])}(),function(){"use strict";var e={template:["$templateCache",function(e){return e.get("module/components/ueButtonFilter/ueButtonFilter.html")}],bindings:{setting:"=",options:"="},controller:"UeButtonFilterController",controllerAs:"vm"};angular.module("universal.editor").component("ueButtonFilter",e)}(),function(){"use strict";function e(e,t,n,a,i,o){var l=this;angular.extend(l,o("ButtonsController",{$scope:t}));l.options.$parentComponentId;n.bind("click",function(){var t,n=null,o=l.options.$parentComponentId;if(l.beforeSend&&(a.callbackBeforeSend=l.beforeSend),t=i.search().filter,t&&(t=JSON.parse(t)),"send"===l.action){var r=a.calculate(o);r&&(t=t||{},t[o]=r),r===!1&&(t=t||{},delete t[o]),n=t&&!$.isEmptyObject(t)?JSON.stringify(t):null}"clear"===l.action&&(a.clearFiltersValue(o),t&&(delete t[o],$.isEmptyObject(t)||(n=JSON.stringify(t)))),i.search("filter",n),e.$broadcast("editor:read_entity",o)}),n.on("$destroy",function(){t.$destroy()})}angular.module("universal.editor").controller("UeButtonFilterController",e),e.$inject=["$rootScope","$scope","$element","FilterFieldsStorage","$location","$controller"]}(),function(e){try{e=angular.module("universal.editor.templates")}catch(t){e=angular.module("universal.editor.templates",[])}e.run(["$templateCache",function(e){e.put("module/components/ueButtonFilter/ueButtonFilter.html",'\n<button data-ng-class="{ processing : vm.processing}" style="display: inline-block; margin: 10px;" ng-bind="vm.label" class="btn btn-lg btn-create btn-success">\n    <div data-ng-show="vm.processing" class="loader-search-wrapper">\n        <div class="loader-search">{{\'LOADING\' | translate}}</div>\n    </div>\n</button>')}])}(),function(){"use strict";var e={template:["$templateCache",function(e){return e.get("module/components/ueButtonGoto/ueButtonGoto.html")}],bindings:{setting:"=",options:"="},controller:"UeButtonGotoController",controllerAs:"vm"};angular.module("universal.editor").component("ueButtonGoto",e)}(),function(){"use strict";function e(e,t,n,a,i,o,l,r,s,d){var p=this;angular.extend(p,d("ButtonsController",{$scope:e}));var m=p.setting.component.settings.state,c=p.setting.component.settings.type;p.entityId=p.entityId||"new",t.bind("click",function(){var e={reload:!0};if(!p.options.isLoading){var t=l.getStateConfig(m,c),n="pk"+l.getLevelChild(t.name),o={};o[n]=p.entityId;var d=i.search();t&&("ue-modal"===t.component.name?(r.options=p.options,e.reload=!1):p.options&&p.options.back&&(d.back=p.options.back)),a.go(t.name,o,e).then(function(){i.search(d),s(function(){var e=a.params["pk"+l.getLevelChild(a.current.name)];"new"!==e||r.isModalOpen()||l.newSourceEntity(p.options.$parentComponentId,p.setting.component.settings.dataSource.parentField)},0)})}}),p.$postLink=function(){t.on("$destroy",function(){e.$destroy()})}}angular.module("universal.editor").controller("UeButtonGotoController",e),e.$inject=["$scope","$element","RestApiService","$state","$location","configData","EditEntityStorage","ModalService","$timeout","$controller"]}(),function(e){try{e=angular.module("universal.editor.templates")}catch(t){e=angular.module("universal.editor.templates",[])}e.run(["$templateCache",function(e){e.put("module/components/ueButtonGoto/ueButtonGoto.html",'\n<div>\n    <button data-ng-class="{ processing : vm.options.isLoading}" data-ng-if="vm.setting.buttonClass == \'header\'" class="btn btn-lg btn-create btn-success">{{vm.label}}\n        <div data-ng-show="vm.options.isLoading" class="loader-search-wrapper">\n            <div class="loader-search">{{\'LOADING\' | translate}}</div>\n        </div>\n    </button>\n    <button data-ng-if="vm.setting.buttonClass == \'context\'" class="editor-action-button">{{vm.label}}</button>\n</div>')}])}(),function(){"use strict";var e={template:["$templateCache",function(e){return e.get("module/components/ueButtonModal/ueButtonModal.html")}],bindings:{setting:"=",options:"="},controller:"UeButtonModalController",controllerAs:"vm"};angular.module("universal.editor").component("ueButtonModal",e)}(),function(){"use strict";function e(e,t,n,a,i,o,l,r,s){var d=this;angular.extend(d,s("ButtonsController",{$scope:t})),n.bind("click",function(){"close"===d.action&&(d.beforeAction&&d.beforeAction(),l.close(!0))})}angular.module("universal.editor").controller("UeButtonModalController",e),e.$inject=["$rootScope","$scope","$element","RestApiService","configData","$window","ModalService","ButtonsService","$controller"]}(),function(e){try{e=angular.module("universal.editor.templates")}catch(t){e=angular.module("universal.editor.templates",[])}e.run(["$templateCache",function(e){e.put("module/components/ueButtonModal/ueButtonModal.html",'\n<div>\n    <button data-ng-class="{ processing : vm.processing}" style="display: inline-block; margin: 10px;" class="btn btn-lg btn-create btn-success">{{vm.label}}\n        <div data-ng-show="vm.processing" class="loader-search-wrapper">\n            <div class="loader-search">{{\'LOADING\' | translate}}</div>\n        </div>\n    </button>\n</div>')}])}(),function(){"use strict";var e={template:["$templateCache",function(e){return e.get("module/components/ueButtonRequest/ueButtonRequest.html")}],bindings:{setting:"=",options:"="},controller:"UeButtonRequestController",controllerAs:"vm"};angular.module("universal.editor").component("ueButtonRequest",e)}(),function(){"use strict";function e(e,t,n,a,i,o,l){var r=this;switch(angular.extend(r,l("ButtonsController",{$scope:t})),r.classButton="btn btn-md btn-success button-footer",r.setting.buttonClass){case"header":r.classButton="btn btn-lg btn-success";break;case"context":r.classButton="editor-action-button"}r.buttonClick=function(){if(r.setting.component.settings.target)window.open(r.setting.component.settings.url,r.setting.component.settings.target);else{var e={url:r.setting.component.settings.url,method:r.setting.component.settings.method,beforeSend:r.beforeSend};a.actionRequest(e).then(function(e){r.success&&r.success(e)},function(e){r.error&&r.error(e)})["finally"](function(){r.complete&&r.complete(),r.options.isLoading=!1})}},r.$postLink=function(){n.on("$destroy",function(){t.$destroy()})}}angular.module("universal.editor").controller("UeButtonRequestController",e),e.$inject=["$rootScope","$scope","$element","RestApiService","configData","ButtonsService","$controller"]}(),function(e){try{e=angular.module("universal.editor.templates")}catch(t){e=angular.module("universal.editor.templates",[])}e.run(["$templateCache",function(e){e.put("module/components/ueButtonRequest/ueButtonRequest.html",'\n<button data-ng-class="vm.classButton" data-ng-click="vm.buttonClick()">{{vm.label}}</button>')}])}(),function(){"use strict";var e={template:["$templateCache",function(e){return e.get("module/components/ueButtonService/ueButtonService.html")}],bindings:{setting:"=",options:"="},controller:"UeButtonServiceController",controllerAs:"vm"};angular.module("universal.editor").component("ueButtonService",e)}(),function(){"use strict";function e(e,t,n,a,i,o,l,r,s){var d=this;angular.extend(d,r("ButtonsController",{$scope:t}));var p={};d.setting.component.settings.request&&(p=JSON.parse(d.setting.component.settings.request));var m="pk"+a.getLevelChild(l.current.name),c=l.params[m];"delete"===d.action&&(d.disabled="new"===c||!c),p.options=d.options,n.bind("click",function(){if(!(d.options.isLoading||d.disabled&&"context"!==d.setting.buttonClass))switch(d.action){case"save":"create"==d.type?a.editEntityUpdate("create",p):"update"==d.type&&(i.editedEntityId=d.entityId,a.editEntityUpdate("update",p));break;case"delete":confirm("Удалить запись «"+d.entityId+"»?")&&(p.entityId=d.entityId,p.entityType=t.entityType,p.setting=d.setting,i.deleteItemById(p));break;case"presave":i.editedEntityId=d.entityId,a.editEntityPresave(p);break;case"open":var e={};e.id=d.entityId,e.options=d.options,e.url=d.setting.url,e.parentField=d.setting.parentField,e.headComponent=d.setting.headComponent,i.loadChilds(e)}}),t.$on("editor:presave_entity_created",function(e,t){d.options.isGrid||t.$parentComponentId&&t.$parentComponentId!==d.options.$parentComponentId||(d.entityId=t[d.setting.component.settings.dataSource.primaryKey],d.type="update","delete"===d.action&&(d.disabled=!1))})}angular.module("universal.editor").controller("UeButtonServiceController",e),e.$inject=["$rootScope","$scope","$element","EditEntityStorage","RestApiService","ModalService","$state","$controller","$location"]}(),function(e){try{e=angular.module("universal.editor.templates")}catch(t){e=angular.module("universal.editor.templates",[])}e.run(["$templateCache",function(e){e.put("module/components/ueButtonService/ueButtonService.html",'\n<div>\n    <button data-ng-class="{ processing : vm.options.isLoading}" ng-disabled="vm.disabled" data-ng-if="vm.setting.buttonClass == \'footer\'" class="btn btn-md btn-success">{{vm.label}}\n        <div data-ng-show="vm.options.isLoading" class="loader-search-wrapper">\n            <div class="loader-search">{{\'LOADING\' | translate}}</div>\n        </div>\n    </button>\n    <button data-ng-if="vm.setting.buttonClass == \'context\'" class="editor-action-button">{{vm.label}}</button>\n</div>')}])}(),function(){"use strict";var e={bindings:{setting:"=",options:"="},template:["$templateCache",function(e){return e.get("module/components/ueCheckbox/ueCheckbox.html")}],controller:"UeCheckboxController",controllerAs:"vm"};angular.module("universal.editor").component("ueCheckbox",e)}(),function(){"use strict";function e(e,t,n,a,i,o){function l(){r.fieldValue=[],angular.forEach(r.setting.component.settings.defaultValue,function(e){r.setting.component.settings.multiname?r.fieldValue.push(e[r.setting.component.settings.multiname]):r.fieldValue.push(e)})}var r=this,s=r.setting.component.settings;s.$fieldType="array",r.optionValues=[],r.inputValue="",r.newEntityLoaded=l;var d=o("FieldsController",{$scope:e});angular.extend(r,d),r.singleValue=angular.isArray(r.optionValues)&&1===r.optionValues.length&&!r.optionValues[0][r.field_search],r.singleValue&&(r.checkBoxStyle="display: inline; margin-left: 10px;",r.getFieldValue=function(){var e,t={};return e=angular.isArray(r.fieldValue)?r.fieldValue.length:r.fieldValue||0,r.parentField?(t[r.parentField]={},t[r.parentField][r.fieldName]=e):t[r.fieldName]=e,t}),r.listeners.push(e.$on("editor:entity_loaded",function(t,n){e.onLoadDataHandler(t,n),s.$loadingPromise.then(function(e){r.optionValues=e,r.equalPreviewValue(),r.singleValue&&(r.fieldValue=1==r.fieldValue?[r.optionValues[0][r.field_id]]:[])})["finally"](function(){r.loadingData=!1})}))}angular.module("universal.editor").controller("UeCheckboxController",e),e.$inject=["$scope","$element","EditEntityStorage","RestApiService","FilterFieldsStorage","$controller"]}(),function(e){try{e=angular.module("universal.editor.templates")}catch(t){e=angular.module("universal.editor.templates",[])}e.run(["$templateCache",function(e){e.put("module/components/ueCheckbox/ueCheckbox.html","\n<div ng-class=\"{'field-wrapper row':!vm.options.filter, 'filter-wrapper-field': vm.options.filter}\">\n    <div on-render-template=\"on-render-template\" ng-class=\"{'component-filter': vm.options.filter,                   'component-edit': ((vm.templates.edit &amp;&amp; !vm.options.filter) || (vm.templates.filter &amp;&amp; vm.options.filter)) &amp;&amp; vm.regim === 'edit',                   'component-preview': vm.templates.preview &amp;&amp; vm.regim === 'preview'}\" class=\"component-template\"></div>\n    <div ng-if=\"((!vm.templates.edit &amp;&amp; !vm.options.filter) || (!vm.templates.filter &amp;&amp; vm.options.filter)) &amp;&amp; vm.regim === 'edit'\" ng-class=\"{'component-filter': vm.options.filter}\" class=\"component-edit\"> \n"+'        <label ng-if="!vm.options.filter &amp;&amp; !!vm.label" class="field-name-label">\n            <div data-ng-if="!!vm.hint" class="field-hint">\n                <div ng-bind="vm.hint" class="hint-text"></div>\n            </div><span data-ng-class="{\'editor-required\': vm.required}" ng-bind="vm.label"></span>\n        </label>\n        <div ng-class="{\'filter-inner-wrapper\': vm.options.filter, \'field-element\': !vm.options.filter}" style="{{vm.checkBoxStyle}}"> \n            <div data-ng-repeat="item in vm.optionValues" data-ng-class="{\'disabled\': vm.readonly}" class="checkbox checkbox-inline">\n                <input type="checkbox" data-ng-disabled="vm.readonly" data-checklist-model="vm.fieldValue" data-checklist-value="item[vm.field_id]"/><span ng-bind="item[vm.field_search]"></span>\n            </div>\n        </div>\n    </div>\n    <div ng-if="!vm.templates.preview &amp;&amp; vm.regim === \'preview\'" class="component-preview"> \n        <div data-ng-show="vm.loadingData" class="loader-search-wrapper">\n            <div class="loader-search">{{\'LOADING\' | translate}}</div>\n        </div><span ng-bind="vm.previewValue" data-ng-show="!vm.loadingData" ng-if="!vm.multiple"></span>\n        <div ng-repeat="value in vm.previewValue track by $index" data-ng-show="!vm.loadingData" ng-if="vm.multiple"><span ng-bind="value"></span></div>\n    </div>\n    <div ng-if="!vm.options.filter" class="field-error-wrapper">\n        <div data-ng-repeat="err in vm.error track by $index" class="error-item alert alert-danger">{{err}}</div>\n    </div>\n</div>')}])}(),function(){"use strict";var e={bindings:{setting:"=",options:"="},template:["$templateCache",function(e){return e.get("module/components/ueColorpicker/ueColorpicker.html")}],controller:"UeColorpickerController",controllerAs:"vm"};angular.module("universal.editor").component("ueColorpicker",e)}(),function(){"use strict";function e(e,t,n,a,i,o){function l(e){angular.isArray(s.fieldValue)&&s.fieldValue.forEach(function(t,n){n==e&&s.fieldValue.splice(e,1)})}function r(){s.fieldValue.push("#000000")}var s=this,d=s.setting.component.settings;d.defaultValue=d.multiple?d.defaultValue||["#000000"]:d.defaultValue||"#000000";var p=o("FieldsController",{$scope:e});angular.extend(s,p),s.addItem=r,s.removeItem=l,s.listeners.push(e.$on("editor:entity_loaded",function(t,n){e.onLoadDataHandler(t,n),s.equalPreviewValue()}))}angular.module("universal.editor").controller("UeColorpickerController",e),e.$inject=["$scope","$element","EditEntityStorage","FilterFieldsStorage","$state","$controller"]}(),function(e){try{e=angular.module("universal.editor.templates")}catch(t){e=angular.module("universal.editor.templates",[])}e.run(["$templateCache",function(e){e.put("module/components/ueColorpicker/ueColorpicker.html","\n<div ng-class=\"{'field-wrapper row':!vm.options.filter, 'filter-wrapper-field': vm.options.filter}\">\n    <div on-render-template=\"on-render-template\" ng-class=\"{'component-filter': vm.options.filter,                   'component-edit': ((vm.templates.edit &amp;&amp; !vm.options.filter) || (vm.templates.filter &amp;&amp; vm.options.filter)) &amp;&amp; vm.regim === 'edit',                   'component-preview': vm.templates.preview &amp;&amp; vm.regim === 'preview'}\" class=\"component-template\"></div>\n    <div ng-if=\"((!vm.templates.edit &amp;&amp; !vm.options.filter) || (!vm.templates.filter &amp;&amp; vm.options.filter)) &amp;&amp; vm.regim === 'edit'\" ng-class=\"{'component-filter': vm.options.filter}\" class=\"component-edit\"> \n"+'        <label ng-if="!vm.options.filter &amp;&amp; !!vm.label" class="field-name-label">\n            <div data-ng-if="!!vm.hint" class="field-hint">\n                <div ng-bind="vm.hint" class="hint-text"></div>\n            </div><span data-ng-class="{\'editor-required\': vm.required}" ng-bind="vm.label"></span>\n        </label>\n        <div ng-class="{\'filter-inner-wrapper\': vm.options.filter, \'field-element\': !vm.options.filter}" ng-style="{\'overflow:auto\':vm.multiple}">\n            <div data-ng-if="vm.multiple" ng-class="{\'col-lg-2 col-md-2 col-sm-3 col-xs-3 clear-padding-left\': (!vm.options.isGroup &amp;&amp; !vm.options.filter)}">\n                <div data-ng-repeat="field_item in vm.fieldValue track by $index" class="item-colorpicker-wrappe input-group">\n                    <input type="text" data-ng-disabled="vm.readonly" data-minicolors="" data-ng-model="vm.fieldValue[$index]" class="form-control input-sm"/><span class="input-group-btn">\n                        <button data-ng-click="vm.removeItem($index)" data-ng-if="!vm.readonly" class="btn btn-default btn-sm">x</button></span>\n                </div>\n                <div data-ng-click="vm.addItem()" data-ng-disabled="vm.readonly" class="btn btn-primary btn-sm">{{\'BUTTON.ADD\' | translate}}</div>\n            </div>\n            <div data-ng-if="!vm.multiple" ng-class="{\'col-lg-2 col-md-2 col-sm-3 col-xs-3 clear-padding-left\': (!vm.options.isGroup &amp;&amp; !vm.options.filter)}">\n                <input type="text" data-ng-disabled="vm.readonly" data-minicolors="" data-ng-model="vm.fieldValue" class="form-control input-sm"/>\n            </div>\n        </div>\n    </div>\n    <div ng-if="!vm.templates.preview &amp;&amp; vm.regim === \'preview\'" class="component-preview"> \n        <div data-ng-show="vm.loadingData" class="loader-search-wrapper">\n            <div class="loader-search">{{\'LOADING\' | translate}}</div>\n        </div><span ng-bind="vm.previewValue" data-ng-show="!vm.loadingData" ng-if="!vm.multiple"></span>\n        <div ng-repeat="value in vm.previewValue track by $index" data-ng-show="!vm.loadingData" ng-if="vm.multiple"><span ng-bind="value"></span></div>\n    </div>\n    <div ng-if="!vm.options.filter" class="field-error-wrapper">\n        <div data-ng-repeat="err in vm.error track by $index" class="error-item alert alert-danger">{{err}}</div>\n    </div>\n</div>')}])}(),function(){"use strict";var e={bindings:{setting:"=",options:"="},template:["$templateCache",function(e){return e.get("module/components/ueComponent/ueComponent.html")}],controller:"UeComponentController",controllerAs:"vm"};angular.module("universal.editor").component("ueComponent",e)}(),function(){"use strict";function e(e,t,n,a,i,o,l){var r=this,s=o("BaseController",{$scope:e});angular.extend(r,s)}angular.module("universal.editor").controller("UeComponentController",e),e.$inject=["$scope","$element","EditEntityStorage","FilterFieldsStorage","$location","$controller","$timeout"]}(),function(e){try{e=angular.module("universal.editor.templates")}catch(t){e=angular.module("universal.editor.templates",[])}e.run(["$templateCache",function(e){e.put("module/components/ueComponent/ueComponent.html","\n<div ng-class=\"{'field-wrapper row':!vm.options.filter, 'filter-wrapper-field': vm.options.filter}\">\n    <div on-render-template=\"on-render-template\" ng-class=\"{'component-filter': vm.options.filter,                   'component-edit': ((vm.templates.edit &amp;&amp; !vm.options.filter) || (vm.templates.filter &amp;&amp; vm.options.filter)) &amp;&amp; vm.regim === 'edit',                   'component-preview': vm.templates.preview &amp;&amp; vm.regim === 'preview'}\" class=\"component-template\"></div>\n</div>")}])}(),function(){"use strict";var e={bindings:{setting:"=",options:"="},template:["$templateCache",function(e){return e.get("module/components/ueDate/ueDate.html")}],controller:"UeDateController",controllerAs:"vm"};angular.module("universal.editor").component("ueDate",e)}(),function(){"use strict";function e(e,t,n,a,i,o){function l(e){angular.isArray(s.fieldValue)&&s.fieldValue.forEach(function(t,n){n==e&&s.fieldValue.splice(e,1)})}function r(){s.fieldValue.push(a())}var s=this,d=s.setting.component.settings;d.$fieldType="date";var p=o("FieldsController",{$scope:e});angular.extend(s,p),s.addItem=r,s.removeItem=l,s.format=s.format||"DD.MM.YYYY",e.minDate=s.minDate?a(s.minDate,s.format):s.minDate,e.maxDate=s.maxDate?a(s.maxDate,s.format):s.maxDate,s.listeners.push(e.$on("editor:entity_loaded",function(t,n){e.onLoadDataHandler(t,n),s.equalPreviewValue()})),s.getFieldValue=function(){var e,t={};return s.multiname?(e=[],angular.forEach(s.fieldValue,function(t){if(t&&""!==t&&a.isMoment(t)){var n={};n[s.multiname]=a(t).set({second:0,minute:0,hour:0}).format(s.format),e.push(n)}})):s.multiple?(e=[],angular.forEach(s.fieldValue,function(t){e.push(a(t).set({second:0,minute:0,hour:0}).format(s.format))})):e=void 0!==s.fieldValue&&""!==s.fieldValue&&a.isMoment(s.fieldValue)?a(s.fieldValue).set({second:0,minute:0,hour:0}).format(s.format):"",s.parentField?(t[s.parentField]={},t[s.parentField][s.fieldName]=e):t[s.fieldName]=e,t}}angular.module("universal.editor").controller("UeDateController",e),e.$inject=["$scope","$element","EditEntityStorage","moment","FilterFieldsStorage","$controller"]}(),function(e){try{e=angular.module("universal.editor.templates")}catch(t){e=angular.module("universal.editor.templates",[])}e.run(["$templateCache",function(e){e.put("module/components/ueDate/ueDate.html","\n<div ng-class=\"{'field-wrapper row':!vm.options.filter, 'filter-wrapper-field': vm.options.filter}\">\n    <div on-render-template=\"on-render-template\" ng-class=\"{'component-filter': vm.options.filter,                   'component-edit': ((vm.templates.edit &amp;&amp; !vm.options.filter) || (vm.templates.filter &amp;&amp; vm.options.filter)) &amp;&amp; vm.regim === 'edit',                   'component-preview': vm.templates.preview &amp;&amp; vm.regim === 'preview'}\" class=\"component-template\"></div>\n    <div ng-if=\"((!vm.templates.edit &amp;&amp; !vm.options.filter) || (!vm.templates.filter &amp;&amp; vm.options.filter)) &amp;&amp; vm.regim === 'edit'\" ng-class=\"{'component-filter': vm.options.filter}\" class=\"component-edit\"> \n"+'        <label ng-if="!vm.options.filter &amp;&amp; !!vm.label" class="field-name-label">\n            <div data-ng-if="!!vm.hint" class="field-hint">\n                <div ng-bind="vm.hint" class="hint-text"></div>\n            </div><span data-ng-class="{\'editor-required\': vm.required}" ng-bind="vm.label"></span>\n        </label>\n        <div ng-class="{\'filter-inner-wrapper\': vm.options.filter, \'field-element\': !vm.options.filter}" ng-style="{\'overflow:auto\':vm.multiple}"> \n            <div data-ng-if="vm.multiple" ng-class="{\'col-lg-2 col-md-2 col-sm-3 col-xs-3 clear-padding-left\': (!vm.options.isGroup &amp;&amp; !vm.options.filter)}">\n                <div data-ng-repeat="field_item in vm.fieldValue track by $index" class="item-datepicker-wrapper input-group">\n                    <input data-date-time="" name="{{vm.fieldName}}" data-ng-disabled="vm.readonly" data-ng-model="vm.fieldValue[$index]" min-date="vm.minDate" data-format="{{vm.format || \'DD.MM.YYYY\'}}" data-max-view="year" data-min-view="date" data-view="date" data-ng-blur="vm.inputLeave(vm.fieldValue[$index])" data-min-date="minDate" data-max-date="maxDate" class="form-control input-sm"/><span class="input-group-btn">\n                        <button data-ng-click="vm.removeItem($index)" data-ng-if="!vm.readonly" class="btn btn-default btn-sm">x</button></span>\n                </div>\n                <div data-ng-click="vm.addItem()" data-ng-disabled="vm.readonly" class="btn btn-primary btn-sm">{{\'BUTTON.ADD\' | translate}}</div>\n            </div>\n            <div data-ng-if="!vm.multiple" ng-class="{\'col-lg-2 col-md-2 col-sm-3 col-xs-3 clear-padding-left\': (!vm.options.isGroup &amp;&amp; !vm.options.filter)}">\n                <input data-date-time="" name="{{vm.fieldName}}" data-ng-disabled="vm.readonly" data-ng-model="vm.fieldValue" data-format="{{vm.format || \'DD.MM.YYYY\'}}" data-min-view="date" data-view="date" data-ng-blur="vm.inputLeave(vm.fieldValue)" data-min-date="minDate" data-max-date="maxDate" class="form-control input-sm"/>\n            </div>\n        </div>\n    </div>\n    <div ng-if="!vm.templates.preview &amp;&amp; vm.regim === \'preview\'" class="component-preview"> \n        <div data-ng-show="vm.loadingData" class="loader-search-wrapper">\n            <div class="loader-search">{{\'LOADING\' | translate}}</div>\n        </div><span ng-bind="vm.previewValue" data-ng-show="!vm.loadingData" ng-if="!vm.multiple"></span>\n        <div ng-repeat="value in vm.previewValue track by $index" data-ng-show="!vm.loadingData" ng-if="vm.multiple"><span ng-bind="value"></span></div>\n    </div>\n    <div ng-if="!vm.options.filter" class="field-error-wrapper">\n        <div data-ng-repeat="err in vm.error track by $index" class="error-item alert alert-danger">{{err}}</div>\n    </div>\n</div>');
}])}(),function(){"use strict";var e={bindings:{setting:"=",options:"="},template:["$templateCache",function(e){return e.get("module/components/ueDatetime/ueDatetime.html")}],controller:"UeDatetimeController",controllerAs:"vm"};angular.module("universal.editor").component("ueDatetime",e)}(),function(){"use strict";function e(e,t,n,a,i,o){function l(e){angular.isArray(s.fieldValue)&&s.fieldValue.forEach(function(t,n){n==e&&s.fieldValue.splice(e,1)})}function r(){s.fieldValue.push(a())}var s=this,d=s.setting.component.settings;d.$fieldType="date";var p=o("FieldsController",{$scope:e});angular.extend(s,p),s.addItem=r,s.removeItem=l,e.minDate=s.minDate?a(s.minDate,s.format||"YYYY-MM-DD HH:mm:ss"):s.minDate,e.maxDate=s.maxDate?a(s.maxDate,s.format||"YYYY-MM-DD HH:mm:ss"):s.maxDate,s.format=s.format||"YYYY-MM-DD HH:mm:ss",s.listeners.push(e.$on("editor:entity_loaded",function(t,n){e.onLoadDataHandler(t,n),s.equalPreviewValue()})),s.getFieldValue=function(){var e,t={};return s.multiname?(e=[],angular.forEach(s.fieldValue,function(t){if(t&&""!==t&&a.isMoment(t)){var n={};n[s.multiname]=a(t).format(s.format),e.push(n)}})):s.multiple?(e=[],angular.forEach(s.fieldValue,function(t){e.push(a(t).format(s.format))})):e=void 0!==s.fieldValue&&""!==s.fieldValue&&a.isMoment(s.fieldValue)?a(s.fieldValue).format(s.format):"",s.parentField?(t[s.parentField]={},t[s.parentField][s.fieldName]=e):t[s.fieldName]=e,t}}angular.module("universal.editor").controller("UeDatetimeController",e),e.$inject=["$scope","$element","EditEntityStorage","moment","FilterFieldsStorage","$controller"]}(),function(e){try{e=angular.module("universal.editor.templates")}catch(t){e=angular.module("universal.editor.templates",[])}e.run(["$templateCache",function(e){e.put("module/components/ueDatetime/ueDatetime.html","\n<div ng-class=\"{'field-wrapper row':!vm.options.filter, 'filter-wrapper-field': vm.options.filter}\">\n    <div on-render-template=\"on-render-template\" ng-class=\"{'component-filter': vm.options.filter,                   'component-edit': ((vm.templates.edit &amp;&amp; !vm.options.filter) || (vm.templates.filter &amp;&amp; vm.options.filter)) &amp;&amp; vm.regim === 'edit',                   'component-preview': vm.templates.preview &amp;&amp; vm.regim === 'preview'}\" class=\"component-template\"></div>\n    <div ng-if=\"((!vm.templates.edit &amp;&amp; !vm.options.filter) || (!vm.templates.filter &amp;&amp; vm.options.filter)) &amp;&amp; vm.regim === 'edit'\" ng-class=\"{'component-filter': vm.options.filter}\" class=\"component-edit\"> \n"+'        <label ng-if="!vm.options.filter &amp;&amp; !!vm.label" class="field-name-label">\n            <div data-ng-if="!!vm.hint" class="field-hint">\n                <div ng-bind="vm.hint" class="hint-text"></div>\n            </div><span data-ng-class="{\'editor-required\': vm.required}" ng-bind="vm.label"></span>\n        </label>\n        <div ng-class="{\'filter-inner-wrapper\': vm.options.filter, \'field-element\': !vm.options.filter}" ng-style="{\'overflow:auto\':vm.multiple}"> \n            <div data-ng-if="vm.multiple" ng-class="{\'col-lg-2 col-md-2 col-sm-3 col-xs-3 clear-padding-left\': (!vm.options.isGroup &amp;&amp; !vm.options.filter)}">\n                <div data-ng-repeat="field_item in vm.fieldValue track by $index" class="item-datepicker-wrapper input-group">\n                    <input date-time="" name="{{vm.fieldName}}" data-ng-disabled="vm.readonly" ng-model="vm.fieldValue[$index]" view="date" format="{{vm.format || \'YYYY-MM-DD HH:mm:ss\'}}" data-ng-blur="vm.inputLeave(vm.fieldValue[$index])" data-min-date="minDate" data-max-date="maxDate" class="form-control input-sm"/><span class="input-group-btn">\n                        <button data-ng-click="vm.removeItem($index)" data-ng-if="!vm.readonly" class="btn btn-default btn-sm">x</button></span>\n                </div>\n                <div data-ng-click="vm.addItem()" data-ng-disabled="vm.readonly" class="btn btn-primary btn-sm">{{\'BUTTON.ADD\' | translate}}</div>\n            </div>\n            <div data-ng-if="!vm.multiple" ng-class="{\'col-lg-2 col-md-2 col-sm-3 col-xs-3 clear-padding-left\': (!vm.options.isGroup &amp;&amp; !vm.options.filter)}">\n                <input date-time="" name="{{vm.fieldName}}" data-ng-disabled="vm.readonly" ng-model="vm.fieldValue" view="date" format="{{vm.format || \'YYYY-MM-DD HH:mm:ss\'}}" data-ng-blur="vm.inputLeave(vm.fieldValue)" data-min-date="minDate" data-max-date="maxDate" class="form-control input-sm"/>\n            </div>\n        </div>\n    </div>\n    <div ng-if="!vm.templates.preview &amp;&amp; vm.regim === \'preview\'" class="component-preview"> \n        <div data-ng-show="vm.loadingData" class="loader-search-wrapper">\n            <div class="loader-search">{{\'LOADING\' | translate}}</div>\n        </div><span ng-bind="vm.previewValue" data-ng-show="!vm.loadingData" ng-if="!vm.multiple"></span>\n        <div ng-repeat="value in vm.previewValue track by $index" data-ng-show="!vm.loadingData" ng-if="vm.multiple"><span ng-bind="value"></span></div>\n    </div>\n    <div ng-if="!vm.options.filter" class="field-error-wrapper">\n        <div data-ng-repeat="err in vm.error track by $index" class="error-item alert alert-danger">{{err}}</div>\n    </div>\n</div>')}])}(),function(){"use strict";angular.module("universal.editor").component("ueFilter",{template:["$templateCache",function(e){return e.get("module/components/ueFilter/ueFilter.html")}],bindings:{setting:"=",options:"="},controllerAs:"vm",controller:"UeFilterController"})}(),function(){"use strict";function e(e,t,n,a,i,o,l){var r=this,s=r.setting.component.settings;r.visiable=!1,r.header=s.header,r.body=[],angular.forEach(s.dataSource.fields,function(e){if(e.component.hasOwnProperty("settings")&&(!s.fields||~s.fields.indexOf(e.name))){var n=e.component.settings,a={label:n.label,operators:[],filters:[{field:e,options:{filterParameters:{operator:"%:text%",index:0},filter:!0,$parentComponentId:r.options.$parentComponentId}}]};if(n.$toFilter=n.$toFilter||function(e,t){return angular.forEach(t,function(n,a){e&&e.indexOf(":text")!==-1?(!n||angular.isObject(n)&&$.isEmptyObject(n)||(t[a]=e.replace(":text",n)),(void 0===n||null===n||""===n||angular.isObject(n)&&$.isEmptyObject(n))&&delete t[a]):(n&&(t[e+a]=t[a]),delete t[a])}),t},n.$parseFilter=function(n,a){var i=(n.setting.component.settings,n.parentComponentId),r={};angular.forEach(a,function(t,a){angular.isString(t)&&(t=t.replace(/^%/,"").replace(/%$/,"")),angular.isString(a)&&(a=a.replace(/^\>\=/,"").replace(/^\<\=/,"")),"date"===e.component.settings.$fieldType?(r[a]=r[a]||[],r[a].push(moment.utc(t,n.format))):r[a]=t});var s=r[n.fieldName];return angular.isArray(s)&&(s=s[n.options.filterParameters.index]),"array"===e.component.settings.$fieldType?angular.isArray(s)&&(n.fieldValue=s.split(",")):(n.fieldValue=s,n.addToSelected&&s&&(n.fieldValue={},n.fieldValue[n.field_id]=s,n.addToSelected(null,n.fieldValue))),o(function(){l.getFilterQueryObject(i)||(l.calculate(i),t.$broadcast("editor:read_entity",n.parentComponentId))},0),r},~["ue-select","ue-autocomplete","ue-checkbox","ue-radiolist","ue-colorpicker"].indexOf(e.component.name)&&(a.filters[0].options.filterParameters.operator=":text"),~["ue-date","ue-time","ue-datetime"].indexOf(e.component.name)){a.filters[0].ngStyle="display: inline-block; width: 25%; margin-left: 5px;",a.filters[0].options.filterParameters.operator=">=";var i=angular.copy(e);a.filters.push({field:i,options:{filterParameters:{operator:"<=",index:1},filter:!0,$parentComponentId:r.options.$parentComponentId},ngStyle:"display: inline-block; width: 25%; margin-left: 20px;"})}r.body.push(a)}}),r.footer=[],s.footer&&s.footer.controls||(s.footer={controls:[{component:{name:"ue-button-filter",settings:{$groups:r.body,label:"Применить",action:"send"}}},{component:{name:"ue-button-filter",settings:{label:"Очистить",action:"clear"}}}]}),s.footer&&s.footer.controls&&angular.forEach(s.footer.controls,function(e){r.footer.push(e)}),r.toggleFilterVisibility=function(){r.visiable=!r.visiable},n.on("$destroy",function(){e.$destroy()})}angular.module("universal.editor").controller("UeFilterController",e),e.$inject=["$scope","$rootScope","$element","EditEntityStorage","RestApiService","$timeout","FilterFieldsStorage"]}(),function(e){try{e=angular.module("universal.editor.templates")}catch(t){e=angular.module("universal.editor.templates",[])}e.run(["$templateCache",function(e){e.put("module/components/ueFilter/ueFilter.html",'\n<div class="filter-component">\n    <button data-ng-click="vm.toggleFilterVisibility()" class="btn btn-lg btn-default filter-button">Фильтр {{vm.visiable ? \'-\' : \'+\'}}</button>\n    <div data-ng-hide="!vm.visiable" class="editor-filter">\n        <div ng-keyup="vm.clickEnter($event)" class="editor-filter-wrapper">\n            <div class="editor-filter-head">\n                <label ng-bind="vm.header.label"></label>\n            </div>\n            <div class="editor-filter-body">\n                <div ng-repeat="group in vm.body track by $index" class="filter-content-wrapper">\n                    <label ng-bind="group.label" title="{{group.label}}" class="filter-name-label"></label>\n                    <component-wrapper ng-repeat="filter in group.filters" data-setting="filter.field" data-options="filter.options" style="{{filter.ngStyle}}"></component-wrapper>\n                </div>\n            </div>\n            <div class="editor-filter-footer">\n                <component-wrapper data-ng-repeat="button in vm.footer track by $index" data-setting="button" data-options="vm.options" data-button-class="header"></component-wrapper>\n            </div>\n        </div>\n    </div>\n</div>')}])}(),function(){"use strict";var e={bindings:{setting:"=",options:"="},template:["$templateCache",function(e){return e.get("module/components/ueForm/ueForm.html")}],controller:"UeFormController",controllerAs:"vm"};angular.module("universal.editor").component("ueForm",e)}(),function(){"use strict";function e(e,t,n,a,i,o,l){function r(){p="pk"+l.getLevelChild(i.current.name),m=i.params[p],angular.forEach(s.editFooterBar,function(e,t){"new"===m?e.type="create":e.type="update"})}e.entity=n.getEntityType();var s=(n.getEntityObject(),this);s.assetsPath="/assets/universal-editor",s.configData=t,s.entityLoaded=!1,s.listLoaded=!1,s.errors=[],s.notifys=[],s.entityId="",s.editorEntityType="new",s.editFooterBar=[],s.editFooterBarNew=[],s.editFooterBarExist=[],s.idField="id",s.entityType=e.entity;var d=[{component:{name:"ue-button-service",settings:{label:"Сохранить",action:"save"}}},{component:{name:"ue-button-service",settings:{label:"Удалить",action:"delete"}}},{component:{name:"ue-button-service",settings:{label:"Сохранить",action:"presave"}}}];s.options.$parentComponentId||(s.options={$parentComponentId:s.setting.component.$id}),s.componentState={isLoading:!1,$parentComponentId:s.options.$parentComponentId||s.setting.component.$id};var p="pk"+l.getLevelChild(i.current.name),m=i.params[p];s.configData.ui&&s.configData.ui.assetsPath&&(s.assetsPath=s.configData.ui.assetsPath),s.setting.component.settings.dataSource.hasOwnProperty("primaryKey")&&(s.idField=s.setting.component.settings.dataSource.primaryKey||s.idField),s.setting.component.settings.footer&&s.setting.component.settings.footer.controls&&angular.forEach(s.setting.component.settings.footer.controls,function(e){var t=angular.merge({},e);angular.isUndefined(t.component.settings.dataSource)&&(t.component.settings.dataSource=s.setting.component.settings.dataSource),t.paginationData={},s.editFooterBar.push(t)}),0===s.editFooterBar.length&&angular.forEach(d,function(e){var t=angular.merge({},e);angular.isUndefined(t.component.settings.dataSource)&&(t.component.settings.dataSource=s.setting.component.settings.dataSource),t.paginationData={},s.editFooterBar.push(t)}),r(),e.$watch(function(){return i.params},function(e){r()}),s.components=[],angular.forEach(s.setting.component.settings.body,function(e){if(angular.isObject(e)&&e.component&&(s.components.push(e),void 0===e.component.settings.dataSource&&(e.component.settings.dataSource=s.setting.component.settings.dataSource)),angular.isString(e)){var t=s.setting.component.settings.dataSource.fields.filter(function(t){return t.name==e});t.length>0&&s.components.push(t[0])}}),s.closeButton=function(){s.entityLoaded=!1,s.listLoaded=!1;var e={},t=!0;a.search().back&&(e.type=a.search().back),a.search().parent&&(e.parent=a.search().parent,t=!1);var n=l.getStateConfig("index",e.type),o=({url:s.setting.component.settings.dataSource.url,options:s.componentState},a.search());i.go(n.name,e,{reload:t}).then(function(){o.back&&delete o.back,a.search(o)})},e.$on("editor:entity_loaded",function(e,t){t.$parentComponentId&&t.$parentComponentId!==s.options.$parentComponentId||(s.editorEntityType=t.editorEntityType,s.entityId=t[s.idField],s.entityLoaded=!0)}),e.$on("editor:server_error",function(e,t){s.errors.push(t)}),"new"!==m&&(m?n.getItemById(m,s.setting.component.settings.dataSource,s.componentState):s.setting.pk&&n.getItemById(s.setting.pk,s.setting.component.settings.dataSource,s.componentState)),e.$on("editor:presave_entity_created",function(e,t){s.entityId=t,s.editorEntityType="exist"}),e.$on("editor:field_error",function(e,t){s.errors.push(t)}),e.$on("editor:request_start",function(e,t){s.errors=[],s.notifys=[]}),t.hasOwnProperty("ui")&&t.ui.hasOwnProperty("language")&&(t.ui.language.search(".json")!==-1?o.use(t.ui.language):"ru"!==t.ui.language&&o.use("assets/json/language/"+t.ui.language+".json")),"new"===m&&(s.entityLoaded=!0)}angular.module("universal.editor").controller("UeFormController",e),e.$inject=["$scope","configData","RestApiService","$location","$state","$translate","EditEntityStorage"]}(),function(e){try{e=angular.module("universal.editor.templates")}catch(t){e=angular.module("universal.editor.templates",[])}e.run(["$templateCache",function(e){e.put("module/components/ueForm/ueForm.html",'\n<div class="editor-body">\n    <div data-ng-click="vm.closeButton()" ng-style="{\'background-image\':\'url(\'+ vm.assetsPath +\'/images/close.jpg)\'}" class="close-editor"></div>\n    <component-wrapper ng-repeat="component in vm.components" data-setting="component" data-options="vm.options">           </component-wrapper>\n    <div class="field-error-bottom-wrapper">\n        <div data-ng-repeat="err in vm.errors" class="error-item alert alert-danger">{{err}}</div>\n    </div>\n    <div class="field-notify-bottom-wrapper">\n        <div data-ng-repeat="notify in vm.notifys" class="notify-item">{{notify}}</div>\n    </div>\n    <div data-ng-if="vm.entityLoaded" class="editor-entity-actions">\n        <component-wrapper data-ng-repeat="button in vm.editFooterBar track by $index" data-entity-id="{{vm.entityId}}" data-setting="button" data-options="vm.options" data-button-class="footer" class="editor-action-button"></component-wrapper>\n    </div>\n</div>')}])}(),function(){"use strict";var e={bindings:{setting:"=",options:"="},transclude:!0,template:["$templateCache",function(e){return e.get("module/components/ueFormGroup/ueFormGroup.html")}],controller:"UeFormGroupController",controllerAs:"vm"};angular.module("universal.editor").component("ueFormGroup",e)}(),function(){"use strict";function e(e,t,n,a,i){function o(t,a){if(!d.$isOnlyChildsBroadcast){var i=a[d.fieldName];i&&d.multiple&&angular.isArray(i)&&(i.forEach(d.addItem),n(function(){d.$isOnlyChildsBroadcast=!0,e.$broadcast("editor:entity_loaded",a),delete d.$isOnlyChildsBroadcast},0))}}function l(e){d.fieldsArray;d.fieldsArray.splice(e,1)}function r(){var e=d.innerFields.map(function(e){return angular.extend({},e)});angular.forEach(e,function(e,t){e.parentFieldIndex=d.fieldsArray.length}),d.fieldsArray.push(e)}var s,d=this,p=d.setting.component.settings,m=a.getEntityObject(),c=12;d.fieldName=p.name,s=i("BaseController",{$scope:e}),angular.extend(d,s),d.innerFields=[],d.fieldsArray=[],d.countInLine=p.countInLine||1,c=Math.ceil(12/d.countInLine),d.className="col-md-"+c+" col-xs-"+c+" col-sm-"+c+" col-lg-"+c,d.multiple!==!0||d.fieldName||console.log("UeFormGroup: в режиме multiple обязательно должен быть указан параметр name."),d.addItem=r,d.removeItem=l,angular.forEach(p.fields,function(e,t){var n;angular.isString(e)?n=m.dataSource.fields.filter(function(t){return t.name==e})[0]:e&&e.component&&(n=e),n&&(d.fieldName&&(n.parentField=d.fieldName),d.innerFields.push(n))}),d.$isOnlyChildsBroadcast=!1,d.listeners.push(e.$on("editor:entity_loaded",o)),d.option=angular.merge({},d.options),d.option.isGroup=!0}angular.module("universal.editor").controller("UeFormGroupController",e),e.$inject=["$scope","EditEntityStorage","$timeout","RestApiService","$controller"]}(),function(e){try{e=angular.module("universal.editor.templates")}catch(t){e=angular.module("universal.editor.templates",[])}e.run(["$templateCache",function(e){e.put("module/components/ueFormGroup/ueFormGroup.html",'\n<div class="editor-field-array">\n    <label ng-if="!vm.options.filter &amp;&amp; !!vm.label" class="field-name-label">\n        <div data-ng-if="!!vm.hint" class="field-hint">\n            <div ng-bind="vm.hint" class="hint-text"></div>\n        </div><span data-ng-class="{\'editor-required\': vm.required}" ng-bind="vm.label"></span>\n    </label>\n    <div class="field-array-wrapper editor-form-group col-md-12 col-xs-12 col-sm-12 col-lg-12">\n        <div data-ng-if="vm.multiple">\n            <div data-ng-repeat="fields in vm.fieldsArray track by $index" data-ng-init="outerIndex = $index" class="item-array-wrapper">\n                <data-component-wrapper ng-class="vm.className" data-ng-repeat="field in fields" data-setting="field" data-options="vm.options"></data-component-wrapper>\n                <div class="col-md-12 col-xs-12 col-lg-12 col-sm-12">\n                    <div data-ng-click="vm.removeItem(outerIndex)" data-ng-if="!vm.readonly" class="btn btn-primary btn-xs">{{\'BUTTON.DELETE\' | translate}}</div>\n                </div>\n            </div>\n            <div class="col-md-12 col-xs-12 col-lg-12 col-sm-12">\n                <div data-ng-click="vm.addItem()" data-ng-if="!vm.readonly" class="btn btn-primary btn-sm">{{\'BUTTON.ADD\' | translate}}</div>\n            </div>\n        </div>\n        <div data-ng-if="!vm.multiple">\n            <data-component-wrapper ng-class="vm.className" data-ng-repeat="field in vm.innerFields" data-setting="field" data-options="vm.option"></data-component-wrapper>\n        </div>\n    </div>\n    <div ng-if="!vm.options.filter" class="field-error-wrapper">\n        <div data-ng-repeat="err in vm.error track by $index" class="error-item alert alert-danger">{{err}}</div>\n    </div>\n</div>')}])}(),function(){"use strict";var e={bindings:{setting:"=",options:"="},template:["$templateCache",function(e){return e.get("module/components/ueFormTabs/ueFormTabs.html")}],controller:"UeFormTabsController",controllerAs:"vm"};angular.module("universal.editor").component("ueFormTabs",e)}(),function(){"use strict";function e(e,t,n){function a(e){i.indexTab=e}var i=this,o="pk"+n.getLevelChild(t.current.name),l=(t.params[o],i.setting.component.settings);i.tabs=[],i.indexTab=0,i.activateTab=a,angular.isArray(l.tabs)&&angular.forEach(l.tabs,function(e){var t={};t.label=e.label,t.fields=[],angular.isArray(e.fields)&&angular.forEach(e.fields,function(e){if(angular.isString(e)){var n=l.dataSource.fields.filter(function(t){return t.name==e});n.length>0&&t.fields.push(n[0])}else void 0===e.component.settings.dataSource&&(e.component.settings.dataSource=l.dataSource),t.fields.push(e)}),i.tabs.push(t)})}angular.module("universal.editor").controller("UeFormTabsController",e),e.$inject=["$scope","$state","EditEntityStorage"]}(),function(e){try{e=angular.module("universal.editor.templates")}catch(t){e=angular.module("universal.editor.templates",[])}e.run(["$templateCache",function(e){e.put("module/components/ueFormTabs/ueFormTabs.html",'\n<div class="ue-tab-wrapper">\n    <div class="nav nav-tabs">\n        <li data-ng-repeat="tab in vm.tabs" data-ng-class="{\'active\': vm.indexTab === $index}" data-ng-click="vm.activateTab($index)"><a href="" ng-bind="tab.label"></a></li>\n    </div>\n    <div class="tab-content-wrapper">\n        <div data-ng-repeat="tab in vm.tabs" data-ng-show="vm.indexTab === $index" class="tab-item-content">\n            <component-wrapper data-ng-repeat="field in tab.fields" data-setting="field" data-options="vm.options" data-button-class="footer"></component-wrapper>\n        </div>\n    </div>\n</div>')}])}(),function(){"use strict";var e={bindings:{setting:"=",options:"="},template:["$templateCache",function(e){return e.get("module/components/ueGrid/ueGrid.html")}],controller:"UeGridController",controllerAs:"vm"};angular.module("universal.editor").component("ueGrid",e)}(),function(){"use strict";function e(e,t,n,a,i,o,l,r,s,d,p,m,c,u,v,f){e.entity=a.getEntityType();var g,h=this,b=h.setting.component.settings.dataSource.url,y=h.setting.component.settings.dataSource.parentField;h.configData=n,h.correctEntityType=!0,h.entityLoaded=!1,h.listLoaded=!1,h.loadingData=!0,h.tableFields=[],h.items=[],h.links=[],h.errors=[],h.notifys=[],h.tabsVisibility=[],h.entityId="",h.editorEntityType="new",h.sortField="",h.sortingDirection=!0,h.pageItemsArray=[],h.contextLinks=[],h.mixContextLinks=[],h.listHeaderBar=[],h.$parentComponentId=h.setting.component.$id,h.isContextMenu=!!h.setting.component.settings.contextMenu&&0!==h.setting.component.settings.contextMenu.length,h.options={$parentComponentId:h.$parentComponentId,mixedMode:h.setting.component.settings.mixedMode,sort:h.setting.component.settings.dataSource.sortBy,back:e.entity,isGrid:!0},h.mixOption=angular.merge({},h.options),h.mixOption.isMix=!0,h.setting.component.settings.header?h.filterComponent=h.setting.component.settings.header.filter:h.filterComponent=h.setting.component.settings.header,h.filterComponent!==!1&&(angular.isUndefined(h.filterComponent)&&(h.filterComponent={component:{name:"ue-filter",settings:{header:{label:"Фильтр"}}}}),angular.isUndefined(h.filterComponent.component.settings.dataSource)&&(h.filterComponent.component.settings.dataSource=h.setting.component.settings.dataSource)),h.editFooterBarNew=[],h.editFooterBarExist=[],h.listFooterBar=[],h.contextId=void 0,h.idField="id",h.parentButton=!1,h.filterFields=[],h.visibleFilter=!0,h.pagination=!h.setting.component.settings.dataSource.hasOwnProperty("pagination")||h.setting.component.settings.dataSource.pagination,h.autoCompleteFields=[],h.entityType=h.setting.component.settings.entityType||e.entity,h.parent=null,h.paginationData=[],h.isMixMode=!!h.setting.component.settings.mixedMode,h.isMixMode&&(h.prependIcon=h.setting.component.settings.mixedMode.prependIcon,h.mixEntityType=h.setting.component.settings.mixedMode.entityType,h.subType=h.setting.component.settings.mixedMode.fieldType,angular.forEach(h.setting.component.settings.mixedMode.contextMenu,function(e){var t=angular.merge({},e);t.url=h.setting.component.settings.mixedMode.dataSource.url,t.parentField=y,t.headComponent=h.setting.headComponent,h.mixContextLinks.push(t)})),h.request={childId:h.parent,options:h.options,parentField:y,url:b};var $=o.search().parent;$&&($=JSON.parse($),h.parent=$[h.$parentComponentId]||null),h.setting.component.settings.dataSource.hasOwnProperty("primaryKey")&&(h.idField=h.setting.component.settings.dataSource.primaryKey||h.idField),g="items";var w=h.setting.component.settings.columns;angular.isArray(w)&&w.forEach(function(e){var t,n=h.setting.component.settings.dataSource.fields.filter(function(t){return t.name===e});n.length&&(e=n[0]),angular.isObject(e)&&(t={field:e.name||null,sorted:e.component.settings.multiple!==!0,displayName:e.component.settings.label||e.name,component:e,options:{$parentComponentId:h.$parentComponentId,regim:"preview"}}),t&&h.tableFields.push(t)}),angular.forEach(h.setting.component.settings.dataSource.fields,function(e){e.component.hasOwnProperty("settings")&&h.setting.component.settings.columns.indexOf(e.name)!=-1}),angular.forEach(h.setting.component.settings.contextMenu,function(e){var t=angular.merge({},e);t.url=b,t.parentField=y,t.headComponent=h.setting.headComponent,h.contextLinks.push(t)}),h.setting.component.settings.header&&h.setting.component.settings.header.controls&&angular.forEach(h.setting.component.settings.header.controls,function(e){var t=angular.merge({},e);angular.isUndefined(t.component.settings.dataSource)&&(t.component.settings.dataSource=h.setting.component.settings.dataSource),t.paginationData={},h.listHeaderBar.push(t)}),h.setting.component.settings.footer&&h.setting.component.settings.footer.controls&&angular.forEach(h.setting.component.settings.footer.controls,function(e){var t=angular.merge({},e);angular.isUndefined(t.component.settings.dataSource)&&(t.component.settings.dataSource=h.setting.component.settings.dataSource),t.paginationData={},h.listFooterBar.push(t)}),h.sortField=h.setting.component.settings.dataSource.sortBy||h.tableFields[0].field,h.getScope=function(){return e},h.setTabVisible=function(e,t){h.tabsVisibility[e]=t},h.closeEditor=function(){e.$apply(function(){h.entityLoaded=!1})},h.changeSortField=function(e,t){e&&t&&(h.listLoaded=!1,h.sortField==e?h.sortingDirection=!h.sortingDirection:h.sortField=e,h.options.sort=h.sortingDirection?e:"-"+e,a.getItemsList({url:b,options:h.options,parentField:y,childId:h.parent}))},h.getParent=function(){h.request.childId=h.parent,h.request.parentField=y,h.request.headComponent=h.setting.headComponent,a.loadParent(h.request)},e.$on("editor:parent_id",function(e,t){t.$parentComponentId&&t.$parentComponentId!==h.options.$parentComponentId||(h.parent=t.parentId)}),h.toggleFilterVisibility=function(){h.entityLoaded||(h.visibleFilter=!h.visibleFilter)},e.$on("editor:read_entity",function(e,t){if(t===h.options.$parentComponentId){var n=o.search().parent;n&&(n=JSON.parse(n),h.parent=n[h.$parentComponentId]||null),h.request.childId=h.parent,a.getItemsList(h.request)}}),e.$on("editor:items_list",function(e,n){if(!n.$parentComponentId||n.$parentComponentId===h.options.$parentComponentId){h.listLoaded=!0,h.items=n[g],angular.isArray(h.items)&&h.items.forEach(function(e,t){e.$options={$parentComponentId:h.$parentComponentId,regim:"preview",$dataIndex:t}});var a={editorEntityType:"exist",$parentComponentId:h.$parentComponentId,$items:h.items};r(function(){t.$broadcast("editor:entity_loaded",a)}),h.entityLoaded=!1,h.parentButton=!!h.parent,h.pageItemsArray=[],angular.forEach(h.listFooterBar,function(e){e.paginationData=n})}}),e.$on("editor:server_error",function(e,t){h.errors.push(t)}),e.$on("editor:parent_childs",function(e,t){angular.forEach(h.items,function(e,n){var a=1;e[h.idField]===t.id&&(e.isExpand===!0?(e.isExpand=!1,h.items.splice(n+1,t.childs.length)):(e.isExpand=!0,angular.forEach(t.childs,function(e){h.items[n].hasOwnProperty.parentPadding?e.parentPadding=h.items[n].parentPadding+1:e.parentPadding=1,h.items.splice(n+a,0,e)})))})}),e.$on("editor:entity_success_deleted",function(e,t){}),e.$on("editor:field_error",function(e,t){h.errors.push(t)}),e.$on("editor:request_start",function(e,t){h.errors=[],h.notifys=[]}),l.on("click",function(e){angular.element(e.target).hasClass("context-toggle")||r(function(){h.contextId=void 0},0)}),n.hasOwnProperty("ui")&&n.ui.hasOwnProperty("language")&&(n.ui.language.search(".json")!==-1?m.use(n.ui.language):"ru"!==n.ui.language&&m.use("assets/json/language/"+n.ui.language+".json")),h.$onInit=function(){a.setFilterParams({}),h.request.childId=h.parent,h.request.options=h.options,h.request.parentField=y,h.request.url=b,a.getItemsList(h.request)},h.toggleContextView=function(e){h.styleContextMenu={},h.contextId==e?h.contextId=void 0:h.contextId=e},h.toggleContextViewByEvent=function(e,t){var n=t.pageX-u.find("table")[0].offsetLeft;3===t.which&&(h.styleContextMenu={top:t.offsetY,left:n},h.contextId=e)}}angular.module("universal.editor").controller("UeGridController",e),e.$inject=["$scope","$rootScope","configData","RestApiService","FilterFieldsStorage","$location","$document","$timeout","$httpParamSerializer","$state","toastr","$translate","ConfigDataProvider","$element","$compile","EditEntityStorage"]}(),function(e){try{e=angular.module("universal.editor.templates")}catch(t){e=angular.module("universal.editor.templates",[])}e.run(["$templateCache",function(e){e.put("module/components/ueGrid/ueGrid.html",'\n<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">\n    <div class="editor-header">\n        <component-wrapper ng-if="vm.filterComponent" data-setting="vm.filterComponent" data-options="vm.options"></component-wrapper>\n        <component-wrapper ng-repeat="button in vm.listHeaderBar track by $index" data-setting="button" data-button-class="header" data-options="vm.options" class="header-action-button">       </component-wrapper>\n    </div>\n    <div class="groups-action">\n        <button data-ng-if="vm.parentButton &amp;&amp; !vm.entityLoaded &amp;&amp; !vm.options.isLoading" data-ng-click="vm.getParent()" class="btn btn-sm btn-default">{{\'BUTTON.HIGHER_LEVEL\' | translate}}</button>\n    </div>\n    <div data-ng-show="vm.request.isProcessing" class="processing-status-wrapper">\n        <div class="processing-status">{{\'PERFORMS_ACTIONS\' | translate}}</div>\n    </div>\n    <table data-ng-hide="vm.entityLoaded || vm.options.isLoading" class="table table-bordered items-list">\n        <thead>\n            <tr>\n                <td ng-if="vm.isContextMenu" class="actions-header context-column"></td>\n                <td data-ng-repeat="fieldItem in vm.tableFields" data-ng-class="{ \'active\' : fieldItem.field == vm.sortField, \'asc\' : vm.sortingDirection, \'desc\' : !vm.sortingDirection}" data-ng-click="vm.changeSortField(fieldItem.field, fieldItem.sorted)">{{fieldItem.displayName}}</td>\n            </tr>\n        </thead>\n        <tbody data-ng-if="vm.listLoaded">\n            <tr data-ng-repeat="item in vm.items" data-ng-class="{\'zhs-item\' : (vm.entityType !== item[vm.subType]) &amp;&amp; item[vm.subType] !== undefined}" data-ng-mousedown="vm.toggleContextViewByEvent(item[vm.idField], $event)" oncontextmenu="return false;">\n                <td ng-if="vm.isContextMenu" class="context-column"><span data-ng-click="vm.toggleContextView(item[vm.idField])" data-ng-show="(vm.contextLinks.length &amp;&amp; (item[vm.subType] == vm.entityType || item[vm.subType] == undefined)) || (vm.mixContextLinks.length &amp;&amp; (vm.mixEntityType &amp;&amp; item[vm.subType] === vm.mixEntityType))" class="context-toggle">Toggle buttons</span>\n                    <div data-ng-show="vm.contextId == item[vm.idField]" data-ng-style="vm.styleContextMenu" class="context-menu-wrapper">\n                        <div data-ng-repeat="link in vm.contextLinks track by $index" data-ng-if="(item[vm.subType] == vm.entityType || item[vm.subType] == undefined)" data-ng-class="{\'component-separator\': link.separator}" class="context-menu-item">\n                            <component-wrapper data-setting="link" data-entity-id="{{item[vm.idField]}}" data-button-class="context" data-scope-id-parent="{{vm.scopeIdParent}}" data-options="vm.options"></component-wrapper>\n                        </div>\n                        <div data-ng-repeat="link in vm.mixContextLinks track by $index" data-ng-if="vm.mixEntityType &amp;&amp; item[vm.subType] === vm.mixEntityType" data-ng-class="{\'component-separator\': link.separator}" class="context-menu-item">\n                            <component-wrapper data-setting="link" data-entity-id="{{item[vm.idField]}}" data-button-class="context" data-scope-id-parent="{{vm.scopeIdParent}}" data-options="vm.mixOption"></component-wrapper>\n                        </div>\n                    </div>\n                </td>\n                <td data-ng-repeat="fieldItem in vm.tableFields track by $index"><span data-ng-class="{\'glyphicon-folder-open icon-mix-mode\' : (vm.isMixMode &amp;&amp; !((vm.entityType !== item[vm.subType]) &amp;&amp; item[vm.subType] !== undefined))}" data-ng-if="vm.prependIcon === fieldItem.field" class="glyphicon"></span>\n                    <component-wrapper data-setting="fieldItem.component" data-options="item.$options" ng-style="{\'padding-left\': (item.parentPadding || 0) * 10 + \'px\'}"></component-wrapper>\n                </td>\n            </tr>\n            <tr data-ng-if="vm.items.length == 0">\n                <td colspan="{{vm.tableFields.length + vm.isContextMenu}}">{{\'ELEMENT_NO\' | translate}}</td>\n            </tr>\n        </tbody>\n        <tfoot>\n            <tr>\n                <td colspan="{{vm.tableFields.length + vm.isContextMenu}}">\n                    <component-wrapper data-ng-repeat="component in vm.listFooterBar track by $index" data-setting="component" data-options="vm.options"></component-wrapper>\n                    <!--ue-pagination(data-data="vm.paginationData")-->\n                </td>\n            </tr>\n        </tfoot>\n    </table>\n</div>');
}])}(),function(){"use strict";angular.module("universal.editor").component("ueModal",{template:["$templateCache",function(e){return e.get("module/components/ueModal/ueModal.html")}],bindings:{resolve:"<",close:"&",dismiss:"&"},controllerAs:"vm",controller:function(e,t,n,a,i,o,l){var r=this,s="pk"+o.getLevelChild(i.current.name);r.entityId=i.params[s],r.assetsPath="/assets/universal-editor",r.options=l.options,n.ui&&n.ui.assetsPath&&(r.assetsPath=n.ui.assetsPath);var d=a.closest(".modal-dialog");r.size=r.resolve.settings.size,r.size&&(r.size.width&&d.width(r.size.width),r.size.height&&d.height(r.size.height)),r.header=r.resolve.settings.header,r.body=r.resolve.settings.body,r.body&&r.body.component&&(r.body.component.settings.modal=!0),r.footer=[],r.resolve.settings.footer&&r.resolve.settings.footer.controls&&angular.forEach(r.resolve.settings.footer.controls,function(e){r.footer.push(e)}),r.$onInit=function(){r.resolve.settings.isModal=!0},r.ok=function(){r.close({$value:"ок modal"})},r.cancel=function(){l.close(!0)},t.$on("exit_modal",function(){r.dismiss({$value:"cancel modal emit"})})}})}(),function(e){try{e=angular.module("universal.editor.templates")}catch(t){e=angular.module("universal.editor.templates",[])}e.run(["$templateCache",function(e){e.put("module/components/ueModal/ueModal.html",'\n<div style="background: #ebf1f3;">\n    <div data-ng-click="vm.cancel()" style="display: block; position: absolute; top: 22px; right: 22px; width: 13px; height: 13px; cursor: pointer;" ng-style="{\'background-image\':\'url(\'+ vm.assetsPath +\'/images/close.jpg)\'}" class="close-editor"></div>\n    <div ng-show="vm.header" class="ue-modal-header">\n        <label ng-bind="vm.header.label"></label>\n    </div>\n    <div ng-show="vm.body" class="ue-modal-body">\n        <div ng-bind="vm.body.text" ng-show="vm.body.text" class="text"></div>\n        <div data-ng-if="vm.body &amp;&amp; vm.body.component" class="field-content-wrapper">\n            <component-wrapper data-setting="vm.body" data-options="vm.options"></component-wrapper>\n        </div>\n    </div>\n    <div data-ng-show="vm.footer" class="ue-modal-footer">\n        <component-wrapper data-ng-repeat="button in vm.footer track by $index" data-setting="button" data-options="vm.options" data-button-class="header" class="editor-modal-button"></component-wrapper>\n    </div>\n</div>')}])}(),function(){"use strict";var e={bindings:{setting:"=",options:"="},template:["$templateCache",function(e){return e.get("module/components/uePagination/uePagination.html")}],controller:"UePaginationController",controllerAs:"vm"};angular.module("universal.editor").component("uePagination",e)}(),function(){"use strict";function e(e,t,n,a,i){var o=this;o.metaKey=!0,o.parentComponentId=o.options.$parentComponentId;var l=e.$watch(function(){return o.setting.paginationData},function(e){var t,n,a="_meta",i="items",l=o.setting.component.settings.maxSize||7,r=o.setting.component.settings.dataSource.url,s=o.setting.component.settings.dataSource.parentField;o.request={params:{},options:o.options,parentField:s,url:r},o.pageItemsArray=[],o.items=o.setting.paginationData[i];var d={last:">>",next:">",first:"<<",previous:"<",lastIs:!0,nextIs:!0,firstIs:!0,previousIs:!0};if(o.setting.component.settings.label&&angular.forEach(["last","next","first","previous"],function(e){angular.isDefined(o.setting.component.settings.label[e])&&(o.setting.component.settings.label[e]?d[e]=o.setting.component.settings.label[e]:d[e+"Is"]=!1)}),angular.isDefined(o.setting.component.settings.dataSource.keys)&&(a=o.setting.component.settings.dataSource.keys.meta||a,i=o.setting.component.settings.dataSource.keys.items||i,o.metaKey=0!=o.setting.component.settings.dataSource.keys.meta),o.items&&0===o.items.length&&(o.metaKey=!1),e[a]){o.metaData=e[a],o.metaData.fromItem=(e[a].currentPage-1)*e[a].perPage+1,o.metaData.toItem=(e[a].currentPage-1)*e[a].perPage+e[i].length,e[a].currentPage>1&&(d.firstIs&&o.pageItemsArray.push({label:d.first,page:1}),d.previousIs&&o.pageItemsArray.push({label:d.previous,page:e[a].currentPage-1})),t=e[a].currentPage<=parseInt(l/2)?1:e[a].currentPage>e[a].pageCount-l+1?Math.max(e[a].pageCount-l+1,1):Math.max(e[a].currentPage-parseInt(l/2),1),n=Math.min(t+l-1,e[a].pageCount),t>1&&o.pageItemsArray.push({label:"...",page:t-1});for(var p=t;p<=n;p++)p!==e[a].currentPage?o.pageItemsArray.push({label:p,page:p}):o.pageItemsArray.push({label:e[a].currentPage,self:!0});n<e[a].pageCount&&o.pageItemsArray.push({label:"...",page:n+1}),e[a].currentPage<e[a].pageCount&&(d.nextIs&&o.pageItemsArray.push({label:d.next,page:e[a].currentPage+1}),d.lastIs&&o.pageItemsArray.push({label:d.last,page:e[a].pageCount}))}});o.changePage=function(e,n){e.preventDefault(),o.request.params.page=n.page;var a=i.search().parent;a?(a=JSON.parse(a),o.parent=a[o.parentComponentId]||null,o.request.childId=o.parent):o.request.childId=null,t.getItemsList(o.request)},o.$onDestroy=function(){l()}}angular.module("universal.editor").controller("UePaginationController",e),e.$inject=["$scope","RestApiService","$httpParamSerializer","$sce","$location"]}(),function(e){try{e=angular.module("universal.editor.templates")}catch(t){e=angular.module("universal.editor.templates",[])}e.run(["$templateCache",function(e){e.put("module/components/uePagination/uePagination.html",'\n<div>\n    <ul class="pagination col-lg-10 col-md-10 col-sm-10 col-xs-10">\n        <li data-ng-repeat="pageItem in vm.pageItemsArray" data-ng-class="pageItem.self ? \'active\' : \'\'"><a data-ng-if="!pageItem.self" href="#" data-ng-click="vm.changePage($event, pageItem)">{{pageItem.label}}</a><span data-ng-if="pageItem.self">{{pageItem.label}}</span></li>\n    </ul>\n    <div dana-ng-if="vm.metaKey" class="meta-info col-lg-2 col-md-2 col-sm-2 col-xs-2">{{\'ELEMENTS\' | translate}} {{vm.metaData.fromItem}} - {{vm.metaData.toItem}} {{\'FROM\' | translate}} {{vm.metaData.totalCount}}</div>\n</div>')}])}(),function(){"use strict";var e={bindings:{setting:"=",options:"="},template:["$templateCache",function(e){return e.get("module/components/ueRadiolist/ueRadiolist.html")}],controller:"UeRadiolistController",controllerAs:"vm"};angular.module("universal.editor").component("ueRadiolist",e)}(),function(){"use strict";function e(e,t,n,a,i,o){function l(){r.fieldValue=r.setting.component.settings.defaultValue||null}var r=this;r.optionValues=[],r.inputValue="",r.newEntityLoaded=l;var s=o("FieldsController",{$scope:e});angular.extend(r,s);var d=r.setting.component.settings;r.listeners.push(e.$on("editor:entity_loaded",function(t,n){e.onLoadDataHandler(t,n),d.$loadingPromise.then(function(e){r.optionValues=e,r.equalPreviewValue()})["finally"](function(){r.loadingData=!1})}))}angular.module("universal.editor").controller("UeRadiolistController",e),e.$inject=["$scope","$element","EditEntityStorage","RestApiService","FilterFieldsStorage","$controller"]}(),function(e){try{e=angular.module("universal.editor.templates")}catch(t){e=angular.module("universal.editor.templates",[])}e.run(["$templateCache",function(e){e.put("module/components/ueRadiolist/ueRadiolist.html","\n<div ng-class=\"{'field-wrapper row':!vm.options.filter, 'filter-wrapper-field': vm.options.filter}\">\n    <div on-render-template=\"on-render-template\" ng-class=\"{'component-filter': vm.options.filter,                   'component-edit': ((vm.templates.edit &amp;&amp; !vm.options.filter) || (vm.templates.filter &amp;&amp; vm.options.filter)) &amp;&amp; vm.regim === 'edit',                   'component-preview': vm.templates.preview &amp;&amp; vm.regim === 'preview'}\" class=\"component-template\"></div>\n    <div ng-if=\"((!vm.templates.edit &amp;&amp; !vm.options.filter) || (!vm.templates.filter &amp;&amp; vm.options.filter)) &amp;&amp; vm.regim === 'edit'\" ng-class=\"{'component-filter': vm.options.filter}\" class=\"component-edit\"> \n"+'        <label ng-if="!vm.options.filter &amp;&amp; !!vm.label" class="field-name-label">\n            <div data-ng-if="!!vm.hint" class="field-hint">\n                <div ng-bind="vm.hint" class="hint-text"></div>\n            </div><span data-ng-class="{\'editor-required\': vm.required}" ng-bind="vm.label"></span>\n        </label>\n        <div ng-class="{\'filter-inner-wrapper\': vm.options.filter, \'field-element\': !vm.options.filter}">\n            <div data-ng-class="{\'radiodisabled\': vm.readonly}">\n                <label data-ng-repeat="item in vm.optionValues" class="radio-inline">\n                    <input type="radio" data-ng-disabled="vm.readonly" data-ng-model="vm.fieldValue" value="{{item[vm.field_id]}}"/><span ng-bind="item[vm.field_search]"></span>\n                </label>\n            </div>\n        </div>\n    </div>\n    <div ng-if="!vm.templates.preview &amp;&amp; vm.regim === \'preview\'" class="component-preview"> \n        <div data-ng-show="vm.loadingData" class="loader-search-wrapper">\n            <div class="loader-search">{{\'LOADING\' | translate}}</div>\n        </div><span ng-bind="vm.previewValue" data-ng-show="!vm.loadingData" ng-if="!vm.multiple"></span>\n        <div ng-repeat="value in vm.previewValue track by $index" data-ng-show="!vm.loadingData" ng-if="vm.multiple"><span ng-bind="value"></span></div>\n    </div>\n    <div ng-if="!vm.options.filter" class="field-error-wrapper">\n        <div data-ng-repeat="err in vm.error track by $index" class="error-item alert alert-danger">{{err}}</div>\n    </div>\n</div>')}])}(),function(){"use strict";function e(e,t){}angular.module("universal.editor").controller("DropdownItemsController",e),e.$inject=["$scope","RestApiService"]}(),function(){"use strict";function e(e,t,n){function a(e,t){angular.isFunction(t)&&(t={post:t});var a,i=e.contents().remove();return{post:function(e,o){a||(a=n(i)),a(e,function(e){o.append(e)}),t&&t.post&&t.post.apply(null,arguments)}}}return{restrict:"A",replace:!0,scope:{options:"=",isOpen:"=",fieldSearch:"=",childCountField:"=",onToggle:"=",api:"=",selectBranches:"=",assetsPath:"=",multiple:"=",activeElement:"=",setActiveElement:"=",lvlDropdown:"="},template:e.get("module/components/ueSelect/dropdownItems.html"),controller:"DropdownItemsController",controllerAs:"vm",compile:a}}angular.module("universal.editor").directive("dropdownItems",e),e.$inject=["$templateCache","$document","$compile"]}(),function(e){try{e=angular.module("universal.editor.templates")}catch(t){e=angular.module("universal.editor.templates",[])}e.run(["$templateCache",function(e){e.put("module/components/ueSelect/dropdownItems.html",'\n<div data-ng-show="isOpen">\n    <div data-ng-class="{&quot;dropdown-scroll&quot; : (lvlDropdown == 1)}">\n        <div data-ng-repeat="option in options track by $index" data-ng-class="activeElement == $index ? \'active\' : \'\'" data-ng-mouseover="setActiveElement($event, $index)" class="dropdown-items__item">\n            <div class="option">\n                <div data-ng-if="::selectBranches || !option[childCountField]" data-ng-mousedown="onToggle($event, option)" data-ng-class="{&quot;multi_radio&quot; : !multiple}" class="option__checkbox">\n                    <div data-ng-style="{\'display\': option.checked ? \'block\' : \'\', \'background-image\':\'url(\'+ assetsPath + (!multiple ? \'/images/radio_green.png)\' : \'/images/checkbox_green.png)\')}" data-ng-class="{&quot;multi_radio&quot; : !multiple}" class="checkbox__check"></div>\n                </div>\n                <div data-ng-mousedown="onToggle($event, option, true)" class="option__label"><span data-ng-bind="option[fieldSearch]"></span> <span data-ng-if="option[childCountField]" data-ng-class="{\'option__child-count_open\': option.isOpen}" class="option__child-count">({{option[childCountField]}})</span>\n                </div>\n            </div>\n            <div data-ng-if="option[childCountField]" data-ng-show="!!option.loadingData" class="processing-status-wrapper">\n                <div class="processing-status">Выполняется действие</div>\n            </div>\n            <div data-ng-if="option.childOpts" data-dropdown-items="" data-options="option.childOpts" data-is-open="option.isOpen" data-field-search="fieldSearch" data-child-count-field="childCountField" data-on-toggle="onToggle" data-api="api" data-select-branches="selectBranches" data-assets-path="assetsPath" data-multiple="multiple" data-active-element="activeElement" data-set-active-element="setActiveElement" data-lvl-dropdown="lvlDropdown + 1" class="dropdown-items__children"></div>\n        </div>\n    </div>\n</div>')}])}(),function(){"use strict";var e={bindings:{setting:"=",options:"="},template:["$templateCache",function(e){return e.get("module/components/ueSelect/ueSelect.html")}],controller:"UeSelectController",controllerAs:"vm"};angular.module("universal.editor").component("ueSelect",e)}(),function(){"use strict";function e(e,t,n,a,i,o,l,r,s,d,p,m){function c(e,t,n){if(n&&t[V.treeChildCountField])t.isOpen=!t.isOpen,t[V.treeChildCountField]&&!t.childOpts&&(t.loadingData=!0,a.getUrlResource(S.valuesRemote.url+'?filter={"'+V.treeParentField+'":"'+t[V.field_id]+'"}').then(function(e){t.childOpts||(t.childOpts=[]),t.loadingData=!1,angular.forEach(e.data.items,function(e){t.childOpts.push(e)}),V.filterText||(D=angular.copy(V.optionValues)),V.fieldValue.length&&$(t)},function(e){console.error('EditorFieldSelectController: Не удалось получить значения для поля "'+V.fieldName+'" с удаленного ресурса')}));else{angular.isArray(V.fieldValue)||(V.fieldValue=[]);var o=b(t[V.field_id]);V.multiple?null!==o?(t.checked=!1,V.fieldValue.splice(o,1)):(t.checked=!0,V.fieldValue.push(t)):null===o?(V.fieldValue.splice(0),u(V.optionValues),t.checked=!0,V.isSpanSelectDelete=!0,V.fieldValue.push(t)):(V.fieldValue.splice(0),t.checked=!1,V.isSpanSelectDelete=!1),V.multiple||i(function(){V.isBlur(),r.find("input")[0].blur()},0)}0!==V.fieldValue.length||V.filterText?(V.placeholder=V.multiple?"":V.fieldValue[0][V.field_search],V.sizeInput=V.filterText?V.filterText.length:1):(V.placeholder=S.placeholder||"",V.sizeInput=V.placeholder.length),e&&(e.stopPropagation(),e.preventDefault())}function u(e){for(var t=0,n=e.length;t<n;t++)e[t].checked=!1,e[t].childOpts&&u(e[t].childOpts)}function v(e,n){if(V.treeParentField&&n[V.treeParentField]&&V.multiple){y(V.optionValues,n[V.treeParentField],n[V.field_id]);var a=b(n[V.field_id],n[V.treeParentField]);null!==a&&V.fieldValue.splice(a,1)}else{var a=b(n[V.field_id]);if(null!==a){V.fieldValue.splice(a,1);for(var i=0,o=V.optionValues.length;i<o;i++)V.optionValues[i][V.field_id]===n[V.field_id]&&(V.optionValues[i].checked=!1)}}0!==V.fieldValue.length||V.filterText?(V.placeholder="",V.sizeInput=V.filterText?V.filterText.length:1):(V.placeholder=t.field.placeholder||"",V.sizeInput=V.placeholder.length)}function f(e){t.toggleDropdown(e),t.isOpen=!0}function g(){if(V.activeElement=0,V.fieldValue&&0===V.fieldValue.length&&!V.filterText?(V.placeholder=S.placeholder||"",V.sizeInput=V.placeholder.length):(V.placeholder="",V.sizeInput=V.filterText?V.filterText.length:1),!V.filterText){if(V.multiple||V.isTree)!V.multiple&&V.isTree&&(V.placeholder=V.fieldValue.length&&V.fieldValue[0][V.field_search]?V.fieldValue[0][V.field_search]:S.placeholder);else{if(V.optionValues&&V.optionValues.length&&V.fieldValue){var e=V.optionValues.filter(function(e){return e[V.field_id]===V.fieldValue[V.field_id]||e[V.field_id]===V.fieldValue});e.length&&(V.fieldValue=e[0])}V.placeholder=V.fieldValue&&V.fieldValue[V.field_search]?V.fieldValue[V.field_search]:S.placeholder}if(V.fieldValue)for(var t=0;t<V.fieldValue.length;t++)for(var n=0,a=V.optionValues.length;n<a;n++)V.optionValues[n][V.field_id]===V.fieldValue[t][V.field_id]&&(V.optionValues[n].checked=!0);return D||(D=angular.copy(V.optionValues)),void(V.optionValues=h(angular.copy(D),V.filterText))}V.sizeInput=V.filterText?V.filterText.length:1,D||(D=angular.copy(V.optionValues)),V.optionValues=h(angular.copy(D),V.filterText);for(var t=0;t<V.fieldValue.length;t++)for(var n=0,a=V.optionValues.length;n<a;n++)V.optionValues[n][V.field_id]===V.fieldValue[t][V.field_id]&&(V.optionValues[n].checked=!0)}function h(e,t){var n=[];return n=e.filter(function(e){return e.childOpts&&e.childOpts.length&&(e.childOpts=h(e.childOpts,t)),e[V.field_search].toLowerCase().indexOf(t.toLowerCase())>-1||e.childOpts&&e.childOpts.length})}function b(e,t){if(t){for(var n=0,a=V.fieldValue.length;n<a;n++)if(V.fieldValue[n][V.field_id]===e&&V.fieldValue[n][V.treeParentField]===t)return n}else for(var n=0,a=V.fieldValue.length;n<a;n++)if(V.fieldValue[n][V.field_id]===e)return n;return null}function y(e,t,n){for(var a=0,i=e.length;a<i;a++)if(e[a][V.field_id]===t&&e[a].childOpts)for(var o=0,l=e[a].childOpts.length;o<l;o++)e[a].childOpts[o][V.field_id]===n&&(e[a].childOpts[o].checked=!1);else e[a].childOpts&&e[a].childOpts.length&&y(e[a].childOpts,t,n)}function $(e){if(e)for(var t=0,n=e.childOpts.length;t<n;t++)for(var a=0,i=V.fieldValue.length;a<i;a++)e[V.field_id]===V.fieldValue[a][V.treeParentField]&&e.childOpts[t][V.field_id]===V.fieldValue[a][V.field_id]&&(e.childOpts[t].checked=!0);else for(var t=0,n=V.optionValues.length;t<n;t++)for(var a=0,i=V.fieldValue.length;a<i;a++)V.optionValues[t][V.field_id]!==V.fieldValue[a][V.field_id]||V.fieldValue[a][V.treeParentField]||(V.optionValues[t].checked=!0)}function w(e){angular.forEach(e,function(e){e[V.field_id]==V.fieldValue[V.field_id]&&(V.fieldValue[V.field_search]=e[V.field_search])})}function C(){V.fieldValue=V.multiple?[]:null,V.isSpanSelectDelete=!1}function x(){var e=V.optionValues.length,t=r.find("select");if(t.length){var n=t[0];e<=3?n.size=3:e>=7?n.size=7:n.size=e}}var V=this;V.optionValues=[];var E=p("FieldsController",{$scope:t});angular.extend(V,E);var S=V.setting.component.settings,I=angular.element(r[0].getElementsByClassName("possible-scroll")[0]);V.assetsPath="/assets/universal-editor",o.ui&&o.ui.assetsPath&&(V.assetsPath=o.ui.assetsPath),V.parentValue=!V.depend,V.search=S.search,V.showPossible=!1,V.activeElement=0,V.isSelection=!1,V.possibleLocation=!0,V.isSpanSelectDelete=!1,S.hasOwnProperty("valuesRemote")&&S.tree&&(V.treeParentField=S.tree.parentField,V.treeChildCountField=S.tree.childCountField,V.treeSelectBranches=S.tree.selectBranches,V.isTree=V.treeParentField&&V.treeChildCountField,V.sizeInput=V.placeholder?V.placeholder.length:0),V.depend&&(V.dependField=V.depend.fieldName,V.dependFilter=V.depend.filter),V.multiple||(V.styleInput={width:"99%"}),V.options.filter&&(V.isTree=!1);var _,F,D=[],k=t.$on("editor:entity_loaded",function(e,n){t.onLoadDataHandler(e,n),S.$loadingPromise.then(function(e){D=D.length?D:e,V.optionValues=[],angular.forEach(D,function(e){var t=e[V.field_id];if(t&&V.fieldValue&&(!V.multiple||V.isTree))if(angular.isArray(V.fieldValue)){for(var n=V.fieldValue.length;n--;)if(V.fieldValue[n]==t){V.fieldValue[n]=e;break}}else t===V.fieldValue&&(V.fieldValue=e);V.isTree?e[V.treeParentField]||V.optionValues.push(angular.copy(e)):V.optionValues.push(angular.copy(e))}),V.equalPreviewValue(e)})["finally"](function(){V.loadingData=!1})}),T=t.$watch(function(){return V.fieldValue},function(t){V.multiple||V.isTree||(V.search&&(V.filterText="",g()),V.placeholder=t&&t[V.field_search]?t[V.field_search]:S.placeholder,V.isSelection=!!t&&!!t[V.field_search]),V.isTree&&!V.search&&(V.placeholder=S.placeholder||""),V.isTree&&!V.multiple&&(V.placeholder=t&&t.length&&t[0][V.field_search]?t[0][V.field_search]:S.placeholder),V.setColorPlaceholder(),e.$broadcast("select_field:select_name_"+V.fieldName,t)},!0);V.depend&&(F=t.$on("select_field:select_name_"+V.dependField,function(e,t){t&&""!==t?(V.parentValue=!1,V.optionValues=[],a.getUrlResource(S.valuesRemote.url+'?filter={"'+V.dependFilter+'":"'+t+'"}').then(function(e){angular.forEach(e.data.items,function(e){V.optionValues.push(e)}),i(function(){x()},0),D=angular.copy(V.optionValues),V.parentValue=!0},function(e){console.error('EditorFieldSelectController: Не удалось получить значения для поля "'+V.fieldName+'" с удаленного ресурса')})):V.parentValue=!1})),V.toggle=c,V.remove=v,V.focus=f,V.change=g,V.addToSelected=function(e,t){V.multiple?V.fieldValue.push(t):(V.fieldValue=t,V.fieldValue[V.field_search]||(0===V.optionValues.length&&S.$loadingPromise?S.$loadingPromise.then(w):w(V.optionValues))),V.filterText="",i(function(){V.isSpanSelectDelete=!0,V.showPossible=!1,V.setColorPlaceholder()},0)},V.isShowPossible=function(){V.activeElement=0,V.showPossible=!V.showPossible;var e=r.find(".select-input");V.showPossible&&e.addClass("active");var n=s.innerHeight,a=r.find(".select-input-wrapper"),i=a.height(),o=a.offset(),l=o.top+i;t.$evalAsync(function(){V.possibleLocation=!(n-l<162)}),V.setColorPlaceholder()},l.bind("keydown",function(e){if(V.showPossible||t.isOpen)switch(e.which){case 27:e.preventDefault(),i(function(){V.showPossible=!1,t.isOpen=!1},0);break;case 13:if(e.preventDefault(),(!V.multiple&&!V.isTree||V.isTree)&&V.optionValues.length<1)break;i(function(){V.multiple||V.isTree?V.isTree&&V.toggle(void 0,V.optionValues[V.activeElement],!0):V.addToSelected(null,V.optionValues[V.activeElement])},0);break;case 40:if(e.preventDefault(),!V.multiple&&!V.isTree||V.isTree){if(V.optionValues.length<1)break;V.multiple||V.isTree?V.isTree&&(I=angular.element(r[0].getElementsByClassName("dropdown__items")[0])):I=angular.element(r[0].getElementsByClassName("possible-scroll")[0]),V.activeElement<V.optionValues.length-1&&(i(function(){V.activeElement++},0),i(function(){var e=angular.element(I[0].getElementsByClassName("active")[0])[0].offsetTop,t=angular.element(I[0].getElementsByClassName("active")[0])[0].clientHeight,n=I[0].scrollTop,a=I[0].clientHeight;e>=a+n-t&&(I[0].scrollTop+=t+1)},1))}break;case 38:if(e.preventDefault(),!V.multiple&&!V.isTree||V.isTree){if(V.optionValues.length<1)break;V.multiple||V.isTree?V.isTree&&(I=angular.element(r[0].getElementsByClassName("dropdown__items")[0])):I=angular.element(r[0].getElementsByClassName("possible-scroll")[0]),V.activeElement>0&&(i(function(){V.activeElement--},0),i(function(){var e=angular.element(I[0].getElementsByClassName("active")[0])[0].offsetTop,t=angular.element(I[0].getElementsByClassName("active")[0])[0].clientHeight,n=I[0].scrollTop;I[0].clientHeight;e<n&&(I[0].scrollTop-=t+1)},1))}}}),V.setActiveElement=function(e,t){e.stopPropagation(),i(function(){V.activeElement=t},0)},V.setColorPlaceholder=function(){V.search||V.isTree?V.colorPlaceholder=!(V.placeholder===S.placeholder||t.isOpen):V.colorPlaceholder=!(V.placeholder===S.placeholder||V.showPossible)},V.isBlur=function(){V.showPossible=!1,t.isOpen=!1;var e=r.find(".select-input");e.removeClass("active"),V.setColorPlaceholder()},V.clickSelect=function(){r.find("input")[0].focus()},V.deleteToSelected=function(e,t){t&&8==e.which&&V.fieldValue&&V.fieldValue.length&&!V.filterText&&V.multiple?v(null,V.fieldValue[V.fieldValue.length-1]):V.isTree||t?V.isTree&&!t&&(V.isSpanSelectDelete=!1,v(null,V.fieldValue[0]),e.stopPropagation()):(V.isSpanSelectDelete=!1,V.fieldValue={},e.stopPropagation())},V.clear=C,V.getDistanceByClass=function(e){var t=angular.element(r.find(e)[0]);return s.innerHeight-t.offset().top},this.$onDestroy=function(){angular.isFunction(_)&&_(),k(),T(),angular.isFunction(F)&&F()},this.$postLink=function(){r.on("$destroy",function(){t.$destroy()}),t.isOpen=!1,l.on("click",function(e){r[0].contains(e.target)||t.$apply(function(){t.vm.isBlur()})}),t.toggleDropdown=function(){r.find("input")[0].focus();var e=l.height(),n=r.find(".dropdown__host"),a=n.height(),i=n.offset(),o=i.top+a;if(r.find(".dropdown__items").removeClass("dropdown-top"),r.find(".dropdown__items").removeClass("dropdown-bottom"),e-o<300?r.find(".dropdown__items").addClass("dropdown-top"):r.find(".dropdown__items").addClass("dropdown-bottom"),t.isOpen=!t.isOpen,t.isOpen){var s=r.find(".select-input");s.addClass("active")}V.setColorPlaceholder()}}}angular.module("universal.editor").controller("UeSelectController",e),e.$inject=["$rootScope","$scope","EditEntityStorage","RestApiService","$timeout","configData","$document","$element","$window","FilterFieldsStorage","$controller","$q"],angular.module("universal.editor").filter("selectedValues",function(){return function(e,t){var n=e.map(function(e){return e[t]});return n.join(", ")}})}(),function(e){try{e=angular.module("universal.editor.templates")}catch(t){e=angular.module("universal.editor.templates",[])}e.run(["$templateCache",function(e){e.put("module/components/ueSelect/ueSelect.html","\n<div ng-class=\"{'field-wrapper row':!vm.options.filter, 'filter-wrapper-field': vm.options.filter}\">\n    <div on-render-template=\"on-render-template\" ng-class=\"{'component-filter': vm.options.filter,                   'component-edit': ((vm.templates.edit &amp;&amp; !vm.options.filter) || (vm.templates.filter &amp;&amp; vm.options.filter)) &amp;&amp; vm.regim === 'edit',                   'component-preview': vm.templates.preview &amp;&amp; vm.regim === 'preview'}\" class=\"component-template\"></div>\n    <div ng-if=\"((!vm.templates.edit &amp;&amp; !vm.options.filter) || (!vm.templates.filter &amp;&amp; vm.options.filter)) &amp;&amp; vm.regim === 'edit'\" ng-class=\"{'component-filter': vm.options.filter}\" class=\"component-edit\"> \n"+'        <label ng-if="!vm.options.filter &amp;&amp; !!vm.label" class="field-name-label">\n            <div data-ng-if="!!vm.hint" class="field-hint">\n                <div ng-bind="vm.hint" class="hint-text"></div>\n            </div><span data-ng-class="{\'editor-required\': vm.required}" ng-bind="vm.label"></span>\n        </label>\n        <div ng-class="{\'filter-inner-wrapper\': vm.options.filter, \'field-element\': !vm.options.filter}" ng-style="{\'overflow:auto\': vm.multiple}">\n            <div ng-class="vm.classComponent">\n                <div data-ng-if="vm.multiple &amp;&amp; !vm.isTree">\n                    <div class="select-border">\n                        <select name="{{vm.fieldName}}" data-ng-disabled="vm.readonly || !vm.parentValue" data-ng-model="vm.fieldValue" multiple="multiple" size="3" class="form-control">\n                            <option data-ng-repeat="option in vm.optionValues" value="{{option[vm.field_id]}}">{{option[vm.field_search]}}</option>\n                        </select>\n                    </div>\n                    <div data-ng-show="!!vm.loadingData" style="position: absolute; margin: -28px 0 0 20px;" class="processing-status-wrapper">\n                        <div class="processing-status">{{\'PERFORMS_ACTIONS\' | translate}}</div>\n                    </div>\n                </div>\n                <div data-ng-if="!vm.multiple &amp;&amp; !vm.isTree">\n                    <div data-ng-click="vm.clickSelect()" data-ng-class="!vm.search ? &quot;but-for-search&quot; : &quot;&quot;" class="select-input-wrapper">\n                        <input data-ng-if="vm.search" ng-disabled="vm.loadingData" placeholder="{{vm.placeholder}}" data-ng-class="vm.isSelection ? &quot;color-placeholder&quot; : &quot;&quot;" data-ng-model="vm.filterText" data-ng-change="vm.change()" data-ng-focus="vm.isShowPossible()" data-ng-blur="vm.isBlur()" class="form-control select-input"/>\n                        <input data-ng-if="!vm.search" data-ng-focus="vm.isShowPossible()" data-ng-blur="vm.isBlur()" class="focus-input"/>\n                        <div data-ng-if="!vm.search" class="form-control select-input">\n                            <div data-ng-class="vm.colorPlaceholder ? &quot;color-placeholder-div&quot; : &quot;&quot;" class="dropdown__selected-items">{{vm.placeholder}}</div>\n                        </div><span data-ng-if="vm.isSpanSelectDelete" data-ng-click="vm.deleteToSelected($event, false)" class="selecte-delete">×</span>\n                        <div data-ng-if="!vm.readonly &amp;&amp; (vm.optionValues.length &gt; 0) &amp;&amp; vm.showPossible" data-ng-class="vm.possibleLocation ? &quot;possible-bottom&quot; : &quot;possible-top&quot;" class="possible-values active">\n                            <div class="possible-scroll">\n                                <div data-ng-repeat="option in vm.optionValues" data-ng-mouseover="vm.activeElement = $index" data-ng-mousedown="vm.addToSelected($event, option)" data-ng-class="vm.activeElement == $index ? \'active\' : \'\'" class="possible-value-item">{{option[vm.field_search]}}</div>\n                            </div>\n                        </div>\n                    </div>\n                    <div data-ng-show="vm.loadingData" style="position: absolute; margin: -28px 0 0 20px;" class="processing-status-wrapper">\n                        <div class="processing-status">{{\'PERFORMS_ACTIONS\' | translate}}</div>\n                    </div>\n                </div>\n                <div data-ng-if="vm.isTree" class="dropdown">\n                    <div class="dropdown__host">\n                        <div data-ng-class="{\'dropdown__title_open\': isOpen}" data-ng-click="vm.clickSelect()" data-ng-style="{&quot;cursor&quot; : vm.search &amp;&amp; !vm.loadingData ? &quot;text&quot; : &quot;pointer&quot;}" class="dropdown__title form-control select-input">\n                            <div data-ng-repeat="value in vm.fieldValue" data-ng-if="vm.fieldValue.length &amp;&amp; vm.multiple &amp;&amp; value[vm.field_search]" class="selected-items__item">\n                                <div class="selected-item">\n                                    <label ng-bind="value[vm.field_search]" style="overflow: hidden; text-overflow: ellipsis; margin-right: 15px; display: block;"></label><span data-ng-click="vm.remove($event, value)" style="float: right; width: 10px; margin-top: -24px;" class="selected-item__btn_delete">×</span>\n                                </div>\n                            </div>\n                            <input data-ng-if="vm.search" ng-disabled="vm.loadingData" data-ng-model="vm.filterText" data-ng-change="vm.change()" placeholder="{{vm.placeholder}}" data-ng-style="vm.styleInput" size="{{vm.sizeInput}}" data-ng-focus="toggleDropdown()" data-ng-blur="vm.isBlur()" data-ng-keydown="vm.deleteToSelected($event, true)" data-ng-class="vm.colorPlaceholder ? &quot;color-placeholder&quot; : &quot;&quot;" class="dropdown__search-field"/>\n                            <input data-ng-if="!vm.search" data-ng-focus="toggleDropdown()" data-ng-blur="vm.isBlur()" class="focus-input"/>\n                            <div data-ng-if="!vm.search" class="dropdown__selected">\n                                <div data-ng-class="vm.colorPlaceholder ? &quot;color-placeholder-div&quot; : &quot;&quot;" data-ng-if="!vm.loadingData" class="dropdown__selected-items dropdown-tree">{{vm.placeholder}}</div>\n                            </div><span data-ng-if="vm.isSpanSelectDelete" data-ng-click="vm.deleteToSelected($event, false)" class="selecte-delete">×</span>\n                            <div data-ng-if="::(vm.treeParentField &amp;&amp; vm.treeChildCountField)" data-ng-class="{\'dropdown__items_with-selected\': vm.fieldValue.length &gt; 2 || (vm.search &amp;&amp; vm.fieldValue.length)}" data-dropdown-items="" data-options="vm.optionValues" data-is-open="isOpen &amp;&amp; vm.optionValues.length" data-field-search="vm.field_search" data-child-count-field="vm.treeChildCountField" data-on-toggle="vm.toggle" data-api="vm.field.values_remote.url" data-select-branches="vm.treeSelectBranches" data-assets-path="vm.assetsPath" data-multiple="vm.multiple" data-active-element="vm.activeElement" data-set-active-element="vm.setActiveElement" data-lvl-dropdown="1" class="dropdown__items dropdown__items_with-padding active dropdown-bottom"></div>\n                        </div>\n                    </div>\n                    <div data-ng-show="vm.loadingData" style="position: absolute; margin: -28px 0 0 20px;" class="processing-status-wrapper">\n                        <div class="processing-status">{{\'PERFORMS_ACTIONS\' | translate}}</div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div ng-if="!vm.templates.preview &amp;&amp; vm.regim === \'preview\'" class="component-preview"> \n        <div data-ng-show="vm.loadingData" class="loader-search-wrapper">\n            <div class="loader-search">{{\'LOADING\' | translate}}</div>\n        </div><span ng-bind="vm.previewValue" data-ng-show="!vm.loadingData" ng-if="!vm.multiple"></span>\n        <div ng-repeat="value in vm.previewValue track by $index" data-ng-show="!vm.loadingData" ng-if="vm.multiple"><span ng-bind="value"></span></div>\n    </div>\n    <div ng-if="!vm.options.filter" class="field-error-wrapper">\n        <div data-ng-repeat="err in vm.error track by $index" class="error-item alert alert-danger">{{err}}</div>\n    </div>\n</div>');
}])}(),function(e){try{e=angular.module("universal.editor.templates")}catch(t){e=angular.module("universal.editor.templates",[])}e.run(["$templateCache",function(e){e.put("module/components/ueString/templateField.html",'\n<div data-ng-if="vm.multiple" data-ng-class="vm.classTextarea">\n    <div data-ng-repeat="field_item in vm.fieldValue track by $index" class="item-string-wrapper input-group">\n        <input type="text" data-ui-mask="{{vm.mask}}" data-ng-disabled="vm.readonly" name="{{vm.fieldName}}" data-ng-model="vm.fieldValue[$index]" data-ng-blur="vm.inputLeave(vm.fieldValue[$index])" class="form-control input-sm"/><span class="input-group-btn">\n            <button data-ng-click="vm.removeItem($index)" data-ng-if="!vm.readonly" class="btn btn-default btn-sm">x</button></span>\n    </div>\n    <div data-ng-click="vm.addItem()" data-ng-if="!vm.readonly" class="btn btn-primary btn-sm">{{\'BUTTON.ADD\' | translate}}</div>\n</div>\n<div data-ng-if="!vm.multiple" data-ng-class="vm.classTextarea">\n    <input type="text" data-ui-mask="{{vm.mask}}" data-ng-disabled="vm.readonly" name="{{vm.fieldName}}" data-ng-model="vm.fieldValue" data-ng-blur="vm.inputLeave(vm.fieldValue)" size="{{vm.size}}" class="form-control input-sm"/>\n</div>')}])}(),function(){"use strict";var e={bindings:{setting:"=",options:"="},template:["$templateCache",function(e){return e.get("module/components/ueString/ueString.html")}],controller:"UeStringController",controllerAs:"vm"};angular.module("universal.editor").component("ueString",e)}(),function(){"use strict";function e(e,t,n,a,i,o,l){function r(e){angular.isArray(d.fieldValue)&&d.fieldValue.forEach(function(t,n){n==e&&d.fieldValue.splice(e,1)})}function s(){d.fieldValue.push("")}var d=this,p=o("FieldsController",{$scope:e});angular.extend(d,p),d.addItem=s,d.removeItem=r,"password"==d.contentType&&(d.typeInput="password"),d.listeners.push(e.$on("editor:entity_loaded",function(t,n){e.onLoadDataHandler(t,n),d.equalPreviewValue()}))}angular.module("universal.editor").controller("UeStringController",e),e.$inject=["$scope","$element","EditEntityStorage","FilterFieldsStorage","$location","$controller","$timeout"]}(),function(e){try{e=angular.module("universal.editor.templates")}catch(t){e=angular.module("universal.editor.templates",[])}e.run(["$templateCache",function(e){e.put("module/components/ueString/ueString.html","\n<div ng-class=\"{'field-wrapper row':!vm.options.filter, 'filter-wrapper-field': vm.options.filter}\">\n    <div on-render-template=\"on-render-template\" ng-class=\"{'component-filter': vm.options.filter,                   'component-edit': ((vm.templates.edit &amp;&amp; !vm.options.filter) || (vm.templates.filter &amp;&amp; vm.options.filter)) &amp;&amp; vm.regim === 'edit',                   'component-preview': vm.templates.preview &amp;&amp; vm.regim === 'preview'}\" class=\"component-template\"></div>\n    <div ng-if=\"((!vm.templates.edit &amp;&amp; !vm.options.filter) || (!vm.templates.filter &amp;&amp; vm.options.filter)) &amp;&amp; vm.regim === 'edit'\" ng-class=\"{'component-filter': vm.options.filter}\" class=\"component-edit\"> \n"+'        <label ng-if="!vm.options.filter &amp;&amp; !!vm.label" class="field-name-label">\n            <div data-ng-if="!!vm.hint" class="field-hint">\n                <div ng-bind="vm.hint" class="hint-text"></div>\n            </div><span data-ng-class="{\'editor-required\': vm.required}" ng-bind="vm.label"></span>\n        </label>\n        <div ng-class="{\'filter-inner-wrapper\': vm.options.filter, \'field-element\': !vm.options.filter}">\n            <div data-ng-if="vm.multiple" data-ng-class="vm.classComponent">\n                <div data-ng-repeat="field_item in vm.fieldValue track by $index" class="item-string-wrapper input-group">\n                    <input type="{{vm.typeInput}}" data-ui-mask="{{vm.mask}}" data-ui-options="{maskDefinitions : vm.maskDefinitions}" data-ng-disabled="vm.readonly" name="{{vm.fieldName}}" data-ng-model="vm.fieldValue[$index]" step="{{vm.stepNumber}}" data-ng-blur="vm.inputLeave(vm.fieldValue[$index], $index)" ng-trim="false" class="form-control input-sm"/><span class="input-group-btn">\n                        <button data-ng-click="vm.removeItem($index)" data-ng-if="!vm.readonly" class="btn btn-default btn-sm">x</button></span>\n                </div>\n                <div data-ng-click="vm.addItem()" data-ng-disabled="vm.readonly" class="btn btn-primary btn-sm">{{\'BUTTON.ADD\' | translate}}</div>\n            </div>\n            <div data-ng-if="!vm.multiple" data-ng-class="vm.classComponent">\n                <input type="{{vm.typeInput}}" data-ui-mask="{{vm.mask}}" data-ui-options="{maskDefinitions : vm.maskDefinitions}" data-ng-disabled="vm.readonly" name="{{vm.fieldName}}" data-ng-model="vm.fieldValue" step="{{vm.stepNumber}}" data-ng-blur="vm.inputLeave(vm.fieldValue)" size="{{vm.size}}" ng-trim="false" class="form-control input-sm"/>\n            </div>\n        </div>\n    </div>\n    <div ng-if="!vm.templates.preview &amp;&amp; vm.regim === \'preview\'" class="component-preview"> \n        <div data-ng-show="vm.loadingData" class="loader-search-wrapper">\n            <div class="loader-search">{{\'LOADING\' | translate}}</div>\n        </div><span ng-bind="vm.previewValue" data-ng-show="!vm.loadingData" ng-if="!vm.multiple"></span>\n        <div ng-repeat="value in vm.previewValue track by $index" data-ng-show="!vm.loadingData" ng-if="vm.multiple"><span ng-bind="value"></span></div>\n    </div>\n    <div ng-if="!vm.options.filter" class="field-error-wrapper">\n        <div data-ng-repeat="err in vm.error track by $index" class="error-item alert alert-danger">{{err}}</div>\n    </div>\n</div>')}])}(),function(){"use strict";var e={bindings:{setting:"=",options:"="},template:["$templateCache",function(e){return e.get("module/components/ueTextarea/ueTextarea.html")}],controller:"UeTextareaController",controllerAs:"vm"};angular.module("universal.editor").component("ueTextarea",e)}(),function(){"use strict";function e(e,t,n,a,i){function o(e){angular.isArray(r.fieldValue)&&r.fieldValue.forEach(function(t,n){n==e&&r.fieldValue.splice(e,1)})}function l(){r.fieldValue.push("")}var r=this,s=i("FieldsController",{$scope:e});angular.extend(r,s);var d=r.setting.component.settings;r.rows=d.height||7,r.addItem=l,r.removeItem=o,r.classComponent=r.cols?r.classComponent:"",r.listeners.push(e.$on("editor:entity_loaded",function(t,n){e.onLoadDataHandler(t,n),r.equalPreviewValue()}))}angular.module("universal.editor").controller("UeTextareaController",e),e.$inject=["$scope","$element","EditEntityStorage","FilterFieldsStorage","$controller"]}(),function(e){try{e=angular.module("universal.editor.templates")}catch(t){e=angular.module("universal.editor.templates",[])}e.run(["$templateCache",function(e){e.put("module/components/ueTextarea/ueTextarea.html","\n<div ng-class=\"{'field-wrapper row':!vm.options.filter, 'filter-wrapper-field': vm.options.filter}\">\n    <div on-render-template=\"on-render-template\" ng-class=\"{'component-filter': vm.options.filter,                   'component-edit': ((vm.templates.edit &amp;&amp; !vm.options.filter) || (vm.templates.filter &amp;&amp; vm.options.filter)) &amp;&amp; vm.regim === 'edit',                   'component-preview': vm.templates.preview &amp;&amp; vm.regim === 'preview'}\" class=\"component-template\"></div>\n    <div ng-if=\"((!vm.templates.edit &amp;&amp; !vm.options.filter) || (!vm.templates.filter &amp;&amp; vm.options.filter)) &amp;&amp; vm.regim === 'edit'\" ng-class=\"{'component-filter': vm.options.filter}\" class=\"component-edit\"> \n"+'        <label ng-if="!vm.options.filter &amp;&amp; !!vm.label" class="field-name-label">\n            <div data-ng-if="!!vm.hint" class="field-hint">\n                <div ng-bind="vm.hint" class="hint-text"></div>\n            </div><span data-ng-class="{\'editor-required\': vm.required}" ng-bind="vm.label"></span>\n        </label>\n        <div ng-class="{\'filter-inner-wrapper\': vm.options.filter, \'field-element\': !vm.options.filter}">\n            <div data-ng-if="vm.multiple" data-ng-class="vm.classComponent">\n                <div data-ng-repeat="field_item in vm.fieldValue track by $index" class="item-textarea-wrapper">\n                    <textarea name="{{vm.fieldName}}" rows="{{vm.rows}}" data-ng-disabled="vm.readonly" data-ng-model="vm.fieldValue[$index]" data-ng-blur="vm.inputLeave(vm.fieldValue[$index])" data-ng-trim="false" data-ui-mask="{{vm.mask}}" data-ui-options="{maskDefinitions : vm.maskDefinitions}" class="form-control editor-textarea"></textarea>\n                    <div data-ng-click="vm.removeItem($index)" data-ng-if="!vm.readonly" class="btn btn-default btn-sm">x</div>\n                </div>\n                <div data-ng-click="vm.addItem()" data-ng-disabled="vm.readonly" class="btn btn-primary btn-sm">{{\'BUTTON.ADD\' | translate}}</div>\n            </div>\n            <div data-ng-if="!vm.multiple" data-ng-class="vm.classComponent">\n                <textarea name="{{vm.fieldName}}" rows="{{vm.rows}}" data-ng-disabled="vm.readonly" data-ng-model="vm.fieldValue" data-ng-blur="vm.inputLeave(vm.fieldValue)" data-ng-trim="false" data-ui-mask="{{vm.mask}}" data-ui-options="{maskDefinitions : vm.maskDefinitions}" class="form-control editor-textarea"></textarea>\n            </div>\n        </div>\n    </div>\n    <div ng-if="!vm.templates.preview &amp;&amp; vm.regim === \'preview\'" class="component-preview"> \n        <div data-ng-show="vm.loadingData" class="loader-search-wrapper">\n            <div class="loader-search">{{\'LOADING\' | translate}}</div>\n        </div><span ng-bind="vm.previewValue" data-ng-show="!vm.loadingData" ng-if="!vm.multiple"></span>\n        <div ng-repeat="value in vm.previewValue track by $index" data-ng-show="!vm.loadingData" ng-if="vm.multiple"><span ng-bind="value"></span></div>\n    </div>\n    <div ng-if="!vm.options.filter" class="field-error-wrapper">\n        <div data-ng-repeat="err in vm.error track by $index" class="error-item alert alert-danger">{{err}}</div>\n    </div>\n</div>')}])}(),function(){"use strict";var e={bindings:{setting:"=",options:"="},template:["$templateCache",function(e){return e.get("module/components/ueTime/ueTime.html")}],controller:"UeTimeController",controllerAs:"vm"};angular.module("universal.editor").component("ueTime",e)}(),function(){"use strict";function e(e,t,n,a,i,o){function l(e){angular.isArray(s.fieldValue)&&s.fieldValue.forEach(function(t,n){n==e&&s.fieldValue.splice(e,1)})}function r(){s.fieldValue.push(a())}var s=this,d=s.setting.component.settings;d.$fieldType="date";var p=o("FieldsController",{$scope:e});angular.extend(s,p),s.format=s.format||"HH:mm",s.addItem=r,s.removeItem=l,e.minDate=s.minDate?a(s.minDate,s.format):s.minDate,e.maxDate=s.maxDate?a(s.maxDate,s.format):s.maxDate,s.listeners.push(e.$on("editor:entity_loaded",function(t,n){e.onLoadDataHandler(t,n),s.equalPreviewValue()})),s.getFieldValue=function(){var e,t={};return s.multiname?(e=[],angular.forEach(s.fieldValue,function(t){if(t&&""!==t&&a.isMoment(t)){var n={};n[s.multiname]=a(t).format(s.format),e.push(n)}})):s.multiple?(e=[],angular.forEach(s.fieldValue,function(t){e.push(a(t).format(s.format))})):e=void 0!==s.fieldValue&&""!==s.fieldValue&&a.isMoment(s.fieldValue)?a(s.fieldValue).format(s.format):"",s.parentField?(t[s.parentField]={},t[s.parentField][s.fieldName]=e):t[s.fieldName]=e,t}}angular.module("universal.editor").controller("UeTimeController",e),e.$inject=["$scope","EditEntityStorage","$element","moment","FilterFieldsStorage","$controller"]}(),function(e){try{e=angular.module("universal.editor.templates")}catch(t){e=angular.module("universal.editor.templates",[])}e.run(["$templateCache",function(e){e.put("module/components/ueTime/ueTime.html","\n<div ng-class=\"{'field-wrapper row':!vm.options.filter, 'filter-wrapper-field': vm.options.filter}\">\n    <div on-render-template=\"on-render-template\" ng-class=\"{'component-filter': vm.options.filter,                   'component-edit': ((vm.templates.edit &amp;&amp; !vm.options.filter) || (vm.templates.filter &amp;&amp; vm.options.filter)) &amp;&amp; vm.regim === 'edit',                   'component-preview': vm.templates.preview &amp;&amp; vm.regim === 'preview'}\" class=\"component-template\"></div>\n    <div ng-if=\"((!vm.templates.edit &amp;&amp; !vm.options.filter) || (!vm.templates.filter &amp;&amp; vm.options.filter)) &amp;&amp; vm.regim === 'edit'\" ng-class=\"{'component-filter': vm.options.filter}\" class=\"component-edit\"> \n"+'        <label ng-if="!vm.options.filter &amp;&amp; !!vm.label" class="field-name-label">\n            <div data-ng-if="!!vm.hint" class="field-hint">\n                <div ng-bind="vm.hint" class="hint-text"></div>\n            </div><span data-ng-class="{\'editor-required\': vm.required}" ng-bind="vm.label"></span>\n        </label>\n        <div ng-class="{\'filter-inner-wrapper\': vm.options.filter, \'field-element\': !vm.options.filter}" ng-style="{\'overflow:auto\':vm.multiple}">\n            <div data-ng-if="vm.multiple" ng-class="{\'col-lg-2 col-md-2 col-sm-3 col-xs-3 clear-padding-left\': (!vm.options.isGroup &amp;&amp; !vm.options.filter)}">\n                <div data-ng-repeat="field_item in vm.fieldValue track by $index" class="item-timepicker-wrapper input-group">\n                    <input name="{{vm.fieldName}}" data-ng-disabled="vm.readonly" data-ng-model="vm.fieldValue[$index]" data-date-time="" data-format="{{vm.format || \'HH:mm\'}}" data-max-view="hours" data-min-view="minutes" data-view="hours" data-ng-blur="vm.inputLeave(vm.fieldValue[$index])" data-min-date="minDate" data-max-date="maxDate" class="form-control input-sm timepicker"/><span class="input-group-btn">\n                        <button data-ng-click="vm.removeItem($index)" data-ng-if="!vm.readonly" class="btn btn-default btn-sm">x</button></span>\n                </div>\n                <div data-ng-click="vm.addItem()" data-ng-disabled="vm.readonly" class="btn btn-primary btn-sm">{{\'BUTTON.ADD\' | translate}}</div>\n            </div>\n            <div data-ng-if="!vm.multiple" ng-class="{\'col-lg-2 col-md-2 col-sm-3 col-xs-3 clear-padding-left\': (!vm.options.isGroup &amp;&amp; !vm.options.filter)}">\n                <input name="{{vm.fieldName}}" data-ng-disabled="vm.readonly" data-ng-model="vm.fieldValue" data-date-time="" data-format="{{vm.format || \'HH:mm\'}}" data-max-view="hours" data-min-view="minutes" data-view="hours" data-ng-blur="vm.inputLeave(vm.fieldValue)" data-min-date="minDate" data-max-date="maxDate" class="form-control input-sm timepicker"/>\n            </div>\n        </div>\n    </div>\n    <div ng-if="!vm.templates.preview &amp;&amp; vm.regim === \'preview\'" class="component-preview"> \n        <div data-ng-show="vm.loadingData" class="loader-search-wrapper">\n            <div class="loader-search">{{\'LOADING\' | translate}}</div>\n        </div><span ng-bind="vm.previewValue" data-ng-show="!vm.loadingData" ng-if="!vm.multiple"></span>\n        <div ng-repeat="value in vm.previewValue track by $index" data-ng-show="!vm.loadingData" ng-if="vm.multiple"><span ng-bind="value"></span></div>\n    </div>\n    <div ng-if="!vm.options.filter" class="field-error-wrapper">\n        <div data-ng-repeat="err in vm.error track by $index" class="error-item alert alert-danger">{{err}}</div>\n    </div>\n</div>')}])}(),function(){"use strict";function e(e,t,n,a,i,o,l,r,s,d,p){var m=this;m.entity=a.getEntityType(),m.configData=n,m.menu=r,m.type=s;var c;d.current;t.$broadcast("editor:set_entity_type",l.settings);var u=i.find(".universal-editor"),v=e.$new();v.settings={},v.settings.component=l,v.settings.pk=c||null,v.settings.headComponent=!0,v.options={},u.append(o("<"+l.name+' data-setting="settings" data-options="options" ></'+l.name+">")(v))}angular.module("universal.editor").controller("UniversalEditorController",e),e.$inject=["$scope","$rootScope","configData","RestApiService","$element","$compile","component","menu","type","$state","EditEntityStorage"]}(),function(e){try{e=angular.module("universal.editor.templates")}catch(t){e=angular.module("universal.editor.templates",[])}e.run(["$templateCache",function(e){e.put("module/components/universalEditor/universalEditor.html",'\n<ul data-ng-if="vm.menu.length &gt; 1" class="nav nav-tabs">\n    <li data-ng-repeat="item in vm.menu track by $index" data-ng-class="(item.name === vm.type) ? \'active\' : \'\'" class="item"><a data-ui-sref="{{item.sref}}" ui-sref-opts="{reload: true, inherit: false}">{{item.label}}</a></li>\n</ul>\n<div class="universal-editor"></div>')}])}(),function(e){try{e=angular.module("universal.editor.templates")}catch(t){e=angular.module("universal.editor.templates",[])}e.run(["$templateCache",function(e){e.put("module/template/errorField/errorField.html",'\n<div ng-if="!vm.options.filter" class="field-error-wrapper">\n    <div data-ng-repeat="err in vm.error track by $index" class="error-item alert alert-danger">{{err}}</div>\n</div>')}])}(),function(e){try{e=angular.module("universal.editor.templates")}catch(t){e=angular.module("universal.editor.templates",[])}e.run(["$templateCache",function(e){e.put("module/template/labelField/labelField.html",'\n<label ng-if="!vm.options.filter &amp;&amp; !!vm.label" class="field-name-label">\n    <div data-ng-if="!!vm.hint" class="field-hint">\n        <div ng-bind="vm.hint" class="hint-text"></div>\n    </div><span data-ng-class="{\'editor-required\': vm.required}" ng-bind="vm.label"></span>\n</label>')}])}(),function(e){try{e=angular.module("universal.editor.templates")}catch(t){e=angular.module("universal.editor.templates",[])}e.run(["$templateCache",function(e){e.put("module/template/layouts/layoutComponent.html",'\n<div ng-class="{\'field-wrapper row\':!vm.options.filter, \'filter-wrapper-field\': vm.options.filter}">\n    <div on-render-template="on-render-template" ng-class="{\'component-filter\': vm.options.filter,                   \'component-edit\': ((vm.templates.edit &amp;&amp; !vm.options.filter) || (vm.templates.filter &amp;&amp; vm.options.filter)) &amp;&amp; vm.regim === \'edit\',                   \'component-preview\': vm.templates.preview &amp;&amp; vm.regim === \'preview\'}" class="component-template"></div>\n    <div ng-if="((!vm.templates.edit &amp;&amp; !vm.options.filter) || (!vm.templates.filter &amp;&amp; vm.options.filter)) &amp;&amp; vm.regim === \'edit\'" ng-class="{\'component-filter\': vm.options.filter}" class="component-edit"> \n    </div>\n    <div ng-if="!vm.templates.preview &amp;&amp; vm.regim === \'preview\'" class="component-preview"> \n        <div data-ng-show="vm.loadingData" class="loader-search-wrapper">\n            <div class="loader-search">{{\'LOADING\' | translate}}</div>\n        </div><span ng-bind="vm.previewValue" data-ng-show="!vm.loadingData" ng-if="!vm.multiple"></span>\n        <div ng-repeat="value in vm.previewValue track by $index" data-ng-show="!vm.loadingData" ng-if="vm.multiple"><span ng-bind="value"></span></div>\n    </div>\n    <div ng-if="!vm.options.filter" class="field-error-wrapper">\n        <div data-ng-repeat="err in vm.error track by $index" class="error-item alert alert-danger">{{err}}</div>\n    </div>\n</div>')}])}(),function(e){try{e=angular.module("universal.editor.templates")}catch(t){e=angular.module("universal.editor.templates",[])}e.run(["$templateCache",function(e){e.put("module/template/templatesForComponents/temp.html",'\n<button data-ng-click="lockTrigger($event)" class="lock">Локер</button>')}])}();